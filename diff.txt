diff --git a/.gitignore b/.gitignore
index dd86b6a..dee009c 100755
--- a/.gitignore
+++ b/.gitignore
@@ -5,3 +5,4 @@ cache/
 system/logs/
 static/product/
 phpinfo.php
+session/
\ No newline at end of file
diff --git a/admin/action/common/header.action.php b/admin/action/common/header.action.php
index 7aa7492..9dae645 100755
--- a/admin/action/common/header.action.php
+++ b/admin/action/common/header.action.php
@@ -33,9 +33,12 @@ class HeaderAction extends Action {
 		$links['user'] = admin_url('user/user' );
 		$links['user_group'] = admin_url('user/user_permission' );
 
-
-		$links['stores'] = array();
-
+		$folder=$_GET['f'];
+		
+		$selected[($folder=='payment' || $folder=='module' || $folder=='extension' || $folder=='shipping')?'extension':$folder]='selected';
+		
+		$links['selected']=$selected;
+		
 		$this->assign($links);
 				
 		return $this->fetch('common/header');
diff --git a/admin/action/common/login.action.php b/admin/action/common/login.action.php
index fa21b10..2128c14 100755
--- a/admin/action/common/login.action.php
+++ b/admin/action/common/login.action.php
@@ -6,7 +6,7 @@ class LoginAction extends Action {
 
 	public function index() {
 
-		S('ADMIN_UID') && go('/admin/');
+		S('AID') && go('/admin/');
 
 		if (($_SERVER['REQUEST_METHOD'] == 'POST')) {
 		
diff --git a/admin/action/common/logout.action.php b/admin/action/common/logout.action.php
index 337802c..502231b 100644
--- a/admin/action/common/logout.action.php
+++ b/admin/action/common/logout.action.php
@@ -4,10 +4,12 @@ class LogoutAction extends AdminAction{
 
 	public function index(){
 
-		S('ADMIN_UID',null);
+		S('AID',null);
 
 		S('ADMIN',null);
 
+		C('ADMINLOGGED',null);
+
 		unset($_SESSION);
 
 		session_destroy();
diff --git a/admin/action/product/attribute.action.php b/admin/action/product/attribute.action.php
index 1508dd9..493ec50 100755
--- a/admin/action/product/attribute.action.php
+++ b/admin/action/product/attribute.action.php
@@ -1,5 +1,7 @@
 <?php
 
+
+
 class AttributAction extends AdminAction { 
 	
 	protected $lang='product/attribute';
diff --git a/admin/action/product/product.action.php b/admin/action/product/product.action.php
index be49479..0cc5171 100755
--- a/admin/action/product/product.action.php
+++ b/admin/action/product/product.action.php
@@ -12,4 +12,8 @@ class ProductAction extends AdminAction {
 
   		$this->display('product/product_list');
   	}
+
+  	public function edit(){
+  		$this->display('product/product_form');
+  	}
 }
\ No newline at end of file
diff --git a/admin/action/sale/customer_group.php b/admin/action/sale/customer_group.php
deleted file mode 100755
index 434cbd1..0000000
--- a/admin/action/sale/customer_group.php
+++ /dev/null
@@ -1,454 +0,0 @@
-<?php
-class Action extends AdminAction {
-	private $error = array();
- 
-	public function index() {
-		$this->language->load('sale/customer_group');
- 
-		$this->document->setTitle($this->language->get('heading_title'));
- 		
-		$this->load->model('sale/customer_group');
-		
-		$this->getList();
-	}
-
-	public function insert() {
-		$this->language->load('sale/customer_group');
-
-		$this->document->setTitle($this->language->get('heading_title'));
-		
-		$this->load->model('sale/customer_group');
-		
-		if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
-			$this->model_sale_customer_group->addCustomerGroup($this->request->post);
-			
-			$this->session->data['success'] = $this->language->get('text_success');
-
-			$url = '';
-
-			if (isset($this->request->get['sort'])) {
-				$url .= '&sort=' . $this->request->get['sort'];
-			}
-
-			if (isset($this->request->get['order'])) {
-				$url .= '&order=' . $this->request->get['order'];
-			}
-
-			if (isset($this->request->get['page'])) {
-				$url .= '&page=' . $this->request->get['page'];
-			}
-			
-			$this->redirect($this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . $url, 'SSL'));
-		}
-
-		$this->getForm();
-	}
-
-	public function update() {
-		$this->language->load('sale/customer_group');
-
-		$this->document->setTitle($this->language->get('heading_title'));
-		
-		$this->load->model('sale/customer_group');
-		
-		if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
-			$this->model_sale_customer_group->editCustomerGroup($this->request->get['customer_group_id'], $this->request->post);
-			
-			$this->session->data['success'] = $this->language->get('text_success');
-			
-			$url = '';
-
-			if (isset($this->request->get['sort'])) {
-				$url .= '&sort=' . $this->request->get['sort'];
-			}
-
-			if (isset($this->request->get['order'])) {
-				$url .= '&order=' . $this->request->get['order'];
-			}
-
-			if (isset($this->request->get['page'])) {
-				$url .= '&page=' . $this->request->get['page'];
-			}
-			
-			$this->redirect($this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . $url, 'SSL'));
-		}
-
-		$this->getForm();
-	}
-
-	public function delete() { 
-		$this->language->load('sale/customer_group');
-
-		$this->document->setTitle($this->language->get('heading_title'));
-		
-		$this->load->model('sale/customer_group');
-		
-		if (isset($this->request->post['selected']) && $this->validateDelete()) {
-      		foreach ($this->request->post['selected'] as $customer_group_id) {
-				$this->model_sale_customer_group->deleteCustomerGroup($customer_group_id);	
-			}
-						
-			$this->session->data['success'] = $this->language->get('text_success');
-			
-			$url = '';
-
-			if (isset($this->request->get['sort'])) {
-				$url .= '&sort=' . $this->request->get['sort'];
-			}
-
-			if (isset($this->request->get['order'])) {
-				$url .= '&order=' . $this->request->get['order'];
-			}
-
-			if (isset($this->request->get['page'])) {
-				$url .= '&page=' . $this->request->get['page'];
-			}
-			
-			$this->redirect($this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . $url, 'SSL'));
-		}
-
-		$this->getList();
-	}
-
-	protected function getList() {
-		if (isset($this->request->get['sort'])) {
-			$sort = $this->request->get['sort'];
-		} else {
-			$sort = 'cgd.name';
-		}
-		 
-		if (isset($this->request->get['order'])) {
-			$order = $this->request->get['order'];
-		} else {
-			$order = 'ASC';
-		}
-		
-		if (isset($this->request->get['page'])) {
-			$page = $this->request->get['page'];
-		} else {
-			$page = 1;
-		}
-		
-		$url = '';
-		
-		if (isset($this->request->get['sort'])) {
-			$url .= '&sort=' . $this->request->get['sort'];
-		}
-
-		if (isset($this->request->get['order'])) {
-			$url .= '&order=' . $this->request->get['order'];
-		}	
-		
-		if (isset($this->request->get['page'])) {
-			$url .= '&page=' . $this->request->get['page'];
-		}
-			
-  		$this->data['breadcrumbs'] = array();
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('text_home'),
-			'href'      => $this->url->link('common/home', 'token=' . $this->session->data['token'], 'SSL'),
-      		'separator' => false
-   		);
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('heading_title'),
-			'href'      => $this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . $url, 'SSL'),
-      		'separator' => ' :: '
-   		);
-							
-		$this->data['insert'] = $this->url->link('sale/customer_group/insert', 'token=' . $this->session->data['token'] . $url, 'SSL');
-		$this->data['delete'] = $this->url->link('sale/customer_group/delete', 'token=' . $this->session->data['token'] . $url, 'SSL');	
-	
-		$this->data['customer_groups'] = array();
-
-		$data = array(
-			'sort'  => $sort,
-			'order' => $order,
-			'start' => ($page - 1) * $this->config->get('config_admin_limit'),
-			'limit' => $this->config->get('config_admin_limit')
-		);
-		
-		$customer_group_total = $this->model_sale_customer_group->getTotalCustomerGroups();
-		
-		$results = $this->model_sale_customer_group->getCustomerGroups($data);
-
-		foreach ($results as $result) {
-			$action = array();
-			
-			$action[] = array(
-				'text' => $this->language->get('text_edit'),
-				'href' => $this->url->link('sale/customer_group/update', 'token=' . $this->session->data['token'] . '&customer_group_id=' . $result['customer_group_id'] . $url, 'SSL')
-			);		
-		
-			$this->data['customer_groups'][] = array(
-				'customer_group_id' => $result['customer_group_id'],
-				'name'              => $result['name'] . (($result['customer_group_id'] == $this->config->get('config_customer_group_id')) ? $this->language->get('text_default') : null),
-				'sort_order'        => $result['sort_order'],
-				'selected'          => isset($this->request->post['selected']) && in_array($result['customer_group_id'], $this->request->post['selected']),
-				'action'            => $action
-			);
-		}	
-	
-		$this->data['heading_title'] = $this->language->get('heading_title');
-		
-		$this->data['text_no_results'] = $this->language->get('text_no_results');
-
-		$this->data['column_name'] = $this->language->get('column_name');
-		$this->data['column_sort_order'] = $this->language->get('column_sort_order');
-		$this->data['column_action'] = $this->language->get('column_action');
-
-		$this->data['button_insert'] = $this->language->get('button_insert');
-		$this->data['button_delete'] = $this->language->get('button_delete');
- 
- 		if (isset($this->error['warning'])) {
-			$this->data['error_warning'] = $this->error['warning'];
-		} else {
-			$this->data['error_warning'] = '';
-		}
-		
-		if (isset($this->session->data['success'])) {
-			$this->data['success'] = $this->session->data['success'];
-		
-			unset($this->session->data['success']);
-		} else {
-			$this->data['success'] = '';
-		}
-		
-		$url = '';
-
-		if ($order == 'ASC') {
-			$url .= '&order=DESC';
-		} else {
-			$url .= '&order=ASC';
-		}
-
-		if (isset($this->request->get['page'])) {
-			$url .= '&page=' . $this->request->get['page'];
-		}
-
-		$this->data['sort_name'] = $this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . '&sort=cgd.name' . $url, 'SSL');
-		$this->data['sort_sort_order'] = $this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . '&sort=cg.sort_order' . $url, 'SSL');
-		
-		$url = '';
-
-		if (isset($this->request->get['sort'])) {
-			$url .= '&sort=' . $this->request->get['sort'];
-		}
-												
-		if (isset($this->request->get['order'])) {
-			$url .= '&order=' . $this->request->get['order'];
-		}
-				
-		$pagination = new Pagination();
-		$pagination->total = $customer_group_total;
-		$pagination->page = $page;
-		$pagination->limit = $this->config->get('config_admin_limit');
-		$pagination->text = $this->language->get('text_pagination');
-		$pagination->url = $this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . $url . '&page={page}', 'SSL');
-		
-		$this->data['pagination'] = $pagination->render();				
-
-		$this->data['sort'] = $sort; 
-		$this->data['order'] = $order;
-
-		$this->template = 'sale/customer_group_list.tpl';
-		$this->children = array(
-			'common/header',
-			'common/footer'
-		);
-				
-		$this->response->setOutput($this->render());
- 	}
-
-	protected function getForm() {
-		$this->data['heading_title'] = $this->language->get('heading_title');
-		
-		$this->data['text_yes'] = $this->language->get('text_yes');
-		$this->data['text_no'] = $this->language->get('text_no');
-				
-		$this->data['entry_name'] = $this->language->get('entry_name');
-		$this->data['entry_description'] = $this->language->get('entry_description');
-		$this->data['entry_approval'] = $this->language->get('entry_approval');
-		$this->data['entry_company_id_display'] = $this->language->get('entry_company_id_display');
-		$this->data['entry_company_id_required'] = $this->language->get('entry_company_id_required');
-		$this->data['entry_tax_id_display'] = $this->language->get('entry_tax_id_display');
-		$this->data['entry_tax_id_required'] = $this->language->get('entry_tax_id_required');
-		$this->data['entry_sort_order'] = $this->language->get('entry_sort_order');
-		
-		$this->data['button_save'] = $this->language->get('button_save');
-		$this->data['button_cancel'] = $this->language->get('button_cancel');
-
- 		if (isset($this->error['warning'])) {
-			$this->data['error_warning'] = $this->error['warning'];
-		} else {
-			$this->data['error_warning'] = '';
-		}
-
- 		if (isset($this->error['name'])) {
-			$this->data['error_name'] = $this->error['name'];
-		} else {
-			$this->data['error_name'] = array();
-		}
-
-		$url = '';
-			
-		if (isset($this->request->get['sort'])) {
-			$url .= '&sort=' . $this->request->get['sort'];
-		}
-
-		if (isset($this->request->get['order'])) {
-			$url .= '&order=' . $this->request->get['order'];
-		}
-		
-		if (isset($this->request->get['page'])) {
-			$url .= '&page=' . $this->request->get['page'];
-		}
-
-  		$this->data['breadcrumbs'] = array();
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('text_home'),
-			'href'      => $this->url->link('common/home', 'token=' . $this->session->data['token'], 'SSL'),
-      		'separator' => false
-   		);
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('heading_title'),
-			'href'      => $this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . $url, 'SSL'),
-      		'separator' => ' :: '
-   		);
-			
-		if (!isset($this->request->get['customer_group_id'])) {
-			$this->data['action'] = $this->url->link('sale/customer_group/insert', 'token=' . $this->session->data['token'] . $url, 'SSL');
-		} else {
-			$this->data['action'] = $this->url->link('sale/customer_group/update', 'token=' . $this->session->data['token'] . '&customer_group_id=' . $this->request->get['customer_group_id'] . $url, 'SSL');
-		}
-		  
-    	$this->data['cancel'] = $this->url->link('sale/customer_group', 'token=' . $this->session->data['token'] . $url, 'SSL');
-
-		if (isset($this->request->get['customer_group_id']) && ($this->request->server['REQUEST_METHOD'] != 'POST')) {
-			$customer_group_info = $this->model_sale_customer_group->getCustomerGroup($this->request->get['customer_group_id']);
-		}
-		
-		$this->load->model('localisation/language');
-		
-		$this->data['languages'] = $this->model_localisation_language->getLanguages();
-		
-		if (isset($this->request->post['customer_group_description'])) {
-			$this->data['customer_group_description'] = $this->request->post['customer_group_description'];
-		} elseif (isset($this->request->get['customer_group_id'])) {
-			$this->data['customer_group_description'] = $this->model_sale_customer_group->getCustomerGroupDescriptions($this->request->get['customer_group_id']);
-		} else {
-			$this->data['customer_group_description'] = array();
-		}	
-		
-		if (isset($this->request->post['approval'])) {
-			$this->data['approval'] = $this->request->post['approval'];
-		} elseif (!empty($customer_group_info)) {
-			$this->data['approval'] = $customer_group_info['approval'];
-		} else {
-			$this->data['approval'] = '';
-		}	
-					
-		if (isset($this->request->post['company_id_display'])) {
-			$this->data['company_id_display'] = $this->request->post['company_id_display'];
-		} elseif (!empty($customer_group_info)) {
-			$this->data['company_id_display'] = $customer_group_info['company_id_display'];
-		} else {
-			$this->data['company_id_display'] = '';
-		}			
-			
-		if (isset($this->request->post['company_id_required'])) {
-			$this->data['company_id_required'] = $this->request->post['company_id_required'];
-		} elseif (!empty($customer_group_info)) {
-			$this->data['company_id_required'] = $customer_group_info['company_id_required'];
-		} else {
-			$this->data['company_id_required'] = '';
-		}		
-		
-		if (isset($this->request->post['tax_id_display'])) {
-			$this->data['tax_id_display'] = $this->request->post['tax_id_display'];
-		} elseif (!empty($customer_group_info)) {
-			$this->data['tax_id_display'] = $customer_group_info['tax_id_display'];
-		} else {
-			$this->data['tax_id_display'] = '';
-		}			
-			
-		if (isset($this->request->post['tax_id_required'])) {
-			$this->data['tax_id_required'] = $this->request->post['tax_id_required'];
-		} elseif (!empty($customer_group_info)) {
-			$this->data['tax_id_required'] = $customer_group_info['tax_id_required'];
-		} else {
-			$this->data['tax_id_required'] = '';
-		}	
-		
-		if (isset($this->request->post['sort_order'])) {
-			$this->data['sort_order'] = $this->request->post['sort_order'];
-		} elseif (!empty($customer_group_info)) {
-			$this->data['sort_order'] = $customer_group_info['sort_order'];
-		} else {
-			$this->data['sort_order'] = '';
-		}	
-									
-		$this->template = 'sale/customer_group_form.tpl';
-		$this->children = array(
-			'common/header',
-			'common/footer'
-		);
-				
-		$this->response->setOutput($this->render()); 
-	}
-
-	protected function validateForm() {
-		if (!$this->user->hasPermission('modify', 'sale/customer_group')) {
-			$this->error['warning'] = $this->language->get('error_permission');
-		}
-		
-		foreach ($this->request->post['customer_group_description'] as $language_id => $value) {
-			if ((utf8_strlen($value['name']) < 3) || (utf8_strlen($value['name']) > 32)) {
-				$this->error['name'][$language_id] = $this->language->get('error_name');
-			}
-		}
-		
-		if (!$this->error) {
-			return true;
-		} else {
-			return false;
-		}
-	}
-
-	protected function validateDelete() {
-		if (!$this->user->hasPermission('modify', 'sale/customer_group')) {
-			$this->error['warning'] = $this->language->get('error_permission');
-		}
-		
-		$this->load->model('setting/store');
-		$this->load->model('sale/customer');
-      	
-		foreach ($this->request->post['selected'] as $customer_group_id) {
-    		if ($this->config->get('config_customer_group_id') == $customer_group_id) {
-	  			$this->error['warning'] = $this->language->get('error_default');	
-			}  
-			
-			$store_total = $this->model_setting_store->getTotalStoresByCustomerGroupId($customer_group_id);
-
-			if ($store_total) {
-				$this->error['warning'] = sprintf($this->language->get('error_store'), $store_total);
-			}
-			
-			$customer_total = $this->model_sale_customer->getTotalCustomersByCustomerGroupId($customer_group_id);
-
-			if ($customer_total) {
-				$this->error['warning'] = sprintf($this->language->get('error_customer'), $customer_total);
-			}
-		}
-		
-		if (!$this->error) {
-			return true;
-		} else {
-			return false;
-		}
-	}
-}
-?>
\ No newline at end of file
diff --git a/admin/action/sale/order.action.php b/admin/action/sale/order.action.php
index 39e2052..a97258f 100755
--- a/admin/action/sale/order.action.php
+++ b/admin/action/sale/order.action.php
@@ -6,6 +6,6 @@ class OrderAction extends AdminAction {
 
   	public function index() {
 
-  		
+  		$this->display('sale/order_list');
   	}
 }
\ No newline at end of file
diff --git a/admin/action/user/user_permission.php b/admin/action/user/user_permission.php
deleted file mode 100755
index 7ec74cc..0000000
--- a/admin/action/user/user_permission.php
+++ /dev/null
@@ -1,424 +0,0 @@
-<?php
-class Action extends AdminAction {
-	private $error = array();
- 
-	public function index() {
-		$this->language->load('user/user_group');
- 
-		$this->document->setTitle($this->language->get('heading_title'));
- 		
-		$this->load->model('user/user_group');
-		
-		$this->getList();
-	}
-
-	public function insert() {
-		$this->language->load('user/user_group');
-
-		$this->document->setTitle($this->language->get('heading_title'));
-		
-		$this->load->model('user/user_group');
-		
-		if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
-			$this->model_user_user_group->addUserGroup($this->request->post);
-			
-			$this->session->data['success'] = $this->language->get('text_success');
-
-			$url = '';
-
-			if (isset($this->request->get['sort'])) {
-				$url .= '&sort=' . $this->request->get['sort'];
-			}
-
-			if (isset($this->request->get['order'])) {
-				$url .= '&order=' . $this->request->get['order'];
-			}
-			
-			if (isset($this->request->get['page'])) {
-				$url .= '&page=' . $this->request->get['page'];
-			}
-						
-			$this->redirect($this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . $url, 'SSL'));
-		}
-
-		$this->getForm();
-	}
-
-	public function update() {
-		$this->language->load('user/user_group');
-
-		$this->document->setTitle($this->language->get('heading_title'));
-		
-		$this->load->model('user/user_group');
-		
-		if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
-			$this->model_user_user_group->editUserGroup($this->request->get['user_group_id'], $this->request->post);
-			
-			$this->session->data['success'] = $this->language->get('text_success');
-			
-			$url = '';
-
-			if (isset($this->request->get['sort'])) {
-				$url .= '&sort=' . $this->request->get['sort'];
-			}
-
-			if (isset($this->request->get['order'])) {
-				$url .= '&order=' . $this->request->get['order'];
-			}
-
-			if (isset($this->request->get['page'])) {
-				$url .= '&page=' . $this->request->get['page'];
-			}
-						
-			$this->redirect($this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . $url, 'SSL'));
-		}
-
-		$this->getForm();
-	}
-
-	public function delete() { 
-		$this->language->load('user/user_group');
-
-		$this->document->setTitle($this->language->get('heading_title'));
-		
-		$this->load->model('user/user_group');
-		
-		if (isset($this->request->post['selected']) && $this->validateDelete()) {
-      		foreach ($this->request->post['selected'] as $user_group_id) {
-				$this->model_user_user_group->deleteUserGroup($user_group_id);	
-			}
-						
-			$this->session->data['success'] = $this->language->get('text_success');
-			
-			$url = '';
-
-			if (isset($this->request->get['sort'])) {
-				$url .= '&sort=' . $this->request->get['sort'];
-			}
-
-			if (isset($this->request->get['order'])) {
-				$url .= '&order=' . $this->request->get['order'];
-			}
-
-			if (isset($this->request->get['page'])) {
-				$url .= '&page=' . $this->request->get['page'];
-			}
-						
-			$this->redirect($this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . $url, 'SSL'));
-		}
-
-		$this->getList();
-	}
-
-	protected function getList() {
-		if (isset($this->request->get['sort'])) {
-			$sort = $this->request->get['sort'];
-		} else {
-			$sort = 'name';
-		}
-		 
-		if (isset($this->request->get['order'])) {
-			$order = $this->request->get['order'];
-		} else {
-			$order = 'ASC';
-		}
-		
-		if (isset($this->request->get['page'])) {
-			$page = $this->request->get['page'];
-		} else {
-			$page = 1;
-		}
-		
-		$url = '';
-		
-		if (isset($this->request->get['sort'])) {
-			$url .= '&sort=' . $this->request->get['sort'];
-		}
-
-		if (isset($this->request->get['order'])) {
-			$url .= '&order=' . $this->request->get['order'];
-		}	
-	
-		if (isset($this->request->get['page'])) {
-			$url .= '&page=' . $this->request->get['page'];
-		}
-			
-  		$this->data['breadcrumbs'] = array();
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('text_home'),
-			'href'      => $this->url->link('common/home', 'token=' . $this->session->data['token'], 'SSL'),
-      		'separator' => false
-   		);
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('heading_title'),
-			'href'      => $this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . $url, 'SSL'),
-      		'separator' => ' :: '
-   		);
-							
-		$this->data['insert'] = $this->url->link('user/user_permission/insert', 'token=' . $this->session->data['token'] . $url, 'SSL');
-		$this->data['delete'] = $this->url->link('user/user_permission/delete', 'token=' . $this->session->data['token'] . $url, 'SSL');	
-	
-		$this->data['user_groups'] = array();
-
-		$data = array(
-			'sort'  => $sort,
-			'order' => $order,
-			'start' => ($page - 1) * $this->config->get('config_admin_limit'),
-			'limit' => $this->config->get('config_admin_limit')
-		);
-		
-		$user_group_total = $this->model_user_user_group->getTotalUserGroups();
-		
-		$results = $this->model_user_user_group->getUserGroups($data);
-
-		foreach ($results as $result) {
-			$action = array();
-			
-			$action[] = array(
-				'text' => $this->language->get('text_edit'),
-				'href' => $this->url->link('user/user_permission/update', 'token=' . $this->session->data['token'] . '&user_group_id=' . $result['user_group_id'] . $url, 'SSL')
-			);		
-		
-			$this->data['user_groups'][] = array(
-				'user_group_id' => $result['user_group_id'],
-				'name'          => $result['name'],
-				'selected'      => isset($this->request->post['selected']) && in_array($result['user_group_id'], $this->request->post['selected']),
-				'action'        => $action
-			);
-		}	
-	
-		$this->data['heading_title'] = $this->language->get('heading_title');
-		
-		$this->data['text_no_results'] = $this->language->get('text_no_results');
-
-		$this->data['column_name'] = $this->language->get('column_name');
-		$this->data['column_action'] = $this->language->get('column_action');
-
-		$this->data['button_insert'] = $this->language->get('button_insert');
-		$this->data['button_delete'] = $this->language->get('button_delete');
- 
- 		if (isset($this->error['warning'])) {
-			$this->data['error_warning'] = $this->error['warning'];
-		} else {
-			$this->data['error_warning'] = '';
-		}
-		
-		if (isset($this->session->data['success'])) {
-			$this->data['success'] = $this->session->data['success'];
-		
-			unset($this->session->data['success']);
-		} else {
-			$this->data['success'] = '';
-		}
-		
-		$url = '';
-
-		if ($order == 'ASC') {
-			$url .= '&order=DESC';
-		} else {
-			$url .= '&order=ASC';
-		}
-
-		if (isset($this->request->get['page'])) {
-			$url .= '&page=' . $this->request->get['page'];
-		}
-
-		$this->data['sort_name'] = $this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . '&sort=name' . $url, 'SSL');
-		
-		$url = '';
-
-		if (isset($this->request->get['sort'])) {
-			$url .= '&sort=' . $this->request->get['sort'];
-		}
-												
-		if (isset($this->request->get['order'])) {
-			$url .= '&order=' . $this->request->get['order'];
-		}
-				
-		$pagination = new Pagination();
-		$pagination->total = $user_group_total;
-		$pagination->page = $page;
-		$pagination->limit = $this->config->get('config_admin_limit');
-		$pagination->text = $this->language->get('text_pagination');
-		$pagination->url = $this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . $url . '&page={page}', 'SSL');
-		
-		$this->data['pagination'] = $pagination->render();				
-
-		$this->data['sort'] = $sort; 
-		$this->data['order'] = $order;
-
-		$this->template = 'user/user_group_list.tpl';
-		$this->children = array(
-			'common/header',
-			'common/footer'
-		);
-				
-		$this->response->setOutput($this->render());
- 	}
-
-	protected function getForm() {
-		$this->data['heading_title'] = $this->language->get('heading_title');
-		
-		$this->data['text_select_all'] = $this->language->get('text_select_all');
-		$this->data['text_unselect_all'] = $this->language->get('text_unselect_all');
-				
-		$this->data['entry_name'] = $this->language->get('entry_name');
-		$this->data['entry_access'] = $this->language->get('entry_access');
-		$this->data['entry_modify'] = $this->language->get('entry_modify');
-		
-		$this->data['button_save'] = $this->language->get('button_save');
-		$this->data['button_cancel'] = $this->language->get('button_cancel');
-
- 		if (isset($this->error['warning'])) {
-			$this->data['error_warning'] = $this->error['warning'];
-		} else {
-			$this->data['error_warning'] = '';
-		}
-		
- 		if (isset($this->error['name'])) {
-			$this->data['error_name'] = $this->error['name'];
-		} else {
-			$this->data['error_name'] = '';
-		}
-
-		$url = '';
-
-		if (isset($this->request->get['sort'])) {
-			$url .= '&sort=' . $this->request->get['sort'];
-		}
-
-		if (isset($this->request->get['order'])) {
-			$url .= '&order=' . $this->request->get['order'];
-		}
-			
-		if (isset($this->request->get['page'])) {
-			$url .= '&page=' . $this->request->get['page'];
-		}
-		
-  		$this->data['breadcrumbs'] = array();
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('text_home'),
-			'href'      => $this->url->link('common/home', 'token=' . $this->session->data['token'], 'SSL'),
-      		'separator' => false
-   		);
-
-   		$this->data['breadcrumbs'][] = array(
-       		'text'      => $this->language->get('heading_title'),
-			'href'      => $this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . $url, 'SSL'),
-      		'separator' => ' :: '
-   		);
-			
-		if (!isset($this->request->get['user_group_id'])) {
-			$this->data['action'] = $this->url->link('user/user_permission/insert', 'token=' . $this->session->data['token'] . $url, 'SSL');
-		} else {
-			$this->data['action'] = $this->url->link('user/user_permission/update', 'token=' . $this->session->data['token'] . '&user_group_id=' . $this->request->get['user_group_id'] . $url, 'SSL');
-		}
-		  
-    	$this->data['cancel'] = $this->url->link('user/user_permission', 'token=' . $this->session->data['token'] . $url, 'SSL');
-
-		if (isset($this->request->get['user_group_id']) && $this->request->server['REQUEST_METHOD'] != 'POST') {
-			$user_group_info = $this->model_user_user_group->getUserGroup($this->request->get['user_group_id']);
-		}
-
-		if (isset($this->request->post['name'])) {
-			$this->data['name'] = $this->request->post['name'];
-		} elseif (!empty($user_group_info)) {
-			$this->data['name'] = $user_group_info['name'];
-		} else {
-			$this->data['name'] = '';
-		}
-		
-		$ignore = array(
-			'common/home',
-			'common/startup',
-			'common/login',
-			'common/logout',
-			'common/forgotten',
-			'common/reset',			
-			'error/not_found',
-			'error/permission',
-			'common/footer',
-			'common/header'
-		);
-				
-		$this->data['permissions'] = array();
-		
-		$files = glob(DIR_APPLICATION . 'AdminAction/*/*.php');
-		
-		foreach ($files as $file) {
-			$data = explode('/', dirname($file));
-			
-			$permission = end($data) . '/' . basename($file, '.php');
-			
-			if (!in_array($permission, $ignore)) {
-				$this->data['permissions'][] = $permission;
-			}
-		}
-		
-		if (isset($this->request->post['permission']['access'])) {
-			$this->data['access'] = $this->request->post['permission']['access'];
-		} elseif (isset($user_group_info['permission']['access'])) {
-			$this->data['access'] = $user_group_info['permission']['access'];
-		} else { 
-			$this->data['access'] = array();
-		}
-
-		if (isset($this->request->post['permission']['modify'])) {
-			$this->data['modify'] = $this->request->post['permission']['modify'];
-		} elseif (isset($user_group_info['permission']['modify'])) {
-			$this->data['modify'] = $user_group_info['permission']['modify'];
-		} else { 
-			$this->data['modify'] = array();
-		}
-	
-		$this->template = 'user/user_group_form.tpl';
-		$this->children = array(
-			'common/header',
-			'common/footer'
-		);
-				
-		$this->response->setOutput($this->render());
-	}
-
-	protected function validateForm() {
-		if (!$this->user->hasPermission('modify', 'user/user_permission')) {
-			$this->error['warning'] = $this->language->get('error_permission');
-		}
-
-		if ((utf8_strlen($this->request->post['name']) < 3) || (utf8_strlen($this->request->post['name']) > 64)) {
-			$this->error['name'] = $this->language->get('error_name');
-		}
-
-		if (!$this->error) {
-			return true;
-		} else {
-			return false;
-		}
-	}
-
-	protected function validateDelete() {
-		if (!$this->user->hasPermission('modify', 'user/user_permission')) {
-			$this->error['warning'] = $this->language->get('error_permission');
-		}
-		
-		$this->load->model('user/user');
-      	
-		foreach ($this->request->post['selected'] as $user_group_id) {
-			$user_total = $this->model_user_user->getTotalUsersByGroupId($user_group_id);
-
-			if ($user_total) {
-				$this->error['warning'] = sprintf($this->language->get('error_user'), $user_total);
-			}
-		}
-		
-		if (!$this->error) {
-			return true;
-		} else {
-			return false;
-		}
-	}
-}
-?>
\ No newline at end of file
diff --git a/admin/index.php b/admin/index.php
index 6c16f4f..09ff14a 100755
--- a/admin/index.php
+++ b/admin/index.php
@@ -14,6 +14,7 @@ define('IS_ADMIN',true);
 include_once(ROOT.'/core/config.php');
 
 // ini_set('session.cookie_domain',COOKIE_DOMAIN);
+session_save_path(SESSION);
 
 session_start();
 
diff --git a/admin/lang/en/common/header.lang.php b/admin/lang/en/common/header.lang.php
index e57d58f..28efb0f 100755
--- a/admin/lang/en/common/header.lang.php
+++ b/admin/lang/en/common/header.lang.php
@@ -3,32 +3,16 @@
 $langs['heading_title']                    = 'Administration';
 
 // Text
-$langs['text_affiliate']                   = 'Affiliates';
 $langs['text_attribute']                   = 'Attributes';
 $langs['text_attribute_group']             = 'Attribute Groups';
-$langs['text_backup']                      = 'Backup / Restore';
-$langs['text_banner']                      = 'Banners';
-$langs['text_catalog']                     = 'Catalog';
-$langs['text_category']                    = 'Categories';
+$langs['text_product']                     = 'Product';
+$langs['text_category']                    = 'Category';
 $langs['text_confirm']			           = 'Delete/Uninstall cannot be undone! Are you sure you want to do this?';
-$langs['text_country']                     = 'Countries';
-$langs['text_coupon']                      = 'Coupons';
-$langs['text_currency']                    = 'Currencies';
 $langs['text_customer']                    = 'Customers';
 $langs['text_customer_group']              = 'Customer Groups';
-$langs['text_customer_ban_ip']             = 'Banned IP';
-$langs['text_custom_field']                = 'Custom Fields';
 $langs['text_dashboard']                   = 'Dashboard';
-$langs['text_design']                      = 'Design';
-$langs['text_download']                    = 'Downloads';
-$langs['text_error_log']                   = 'Error Logs';
 $langs['text_extension']                   = 'Extensions';
-$langs['text_feed']                        = 'Product Feeds';
-$langs['text_filter']                      = 'Filters';
 $langs['text_front']                       = 'Store Front';
-$langs['text_geo_zone']                    = 'Geo Zones';
-$langs['text_help']                        = 'Help';
-$langs['text_information']                 = 'Information';
 $langs['text_language']                    = 'Languages';
 $langs['text_layout']                      = 'Layouts';
 $langs['text_localisation']                = 'Localisation';
@@ -36,65 +20,22 @@ $langs['text_logged']                      = 'You are logged in as <span>%s</spa
 $langs['text_logout']                      = 'Logout';
 $langs['text_contact']                     = 'Mail';
 $langs['text_manager']                     = 'Extension Manager';
-$langs['text_manufacturer']                = 'Manufacturers';
 $langs['text_module']                      = 'Modules';
 $langs['text_option']                      = 'Options';
 $langs['text_order']                       = 'Orders';
 $langs['text_order_status']                = 'Order Statuses';
 $langs['text_opencart']                    = 'Homepage';
 $langs['text_payment']                     = 'Payments';
-$langs['text_product']                     = 'Products';
-$langs['text_profile']                     = 'Profiles';
-$langs['text_reports']                     = 'Reports';
-$langs['text_report_sale_order']           = 'Orders';
-$langs['text_report_sale_tax']             = 'Tax';
-$langs['text_report_sale_shipping']        = 'Shipping';
-$langs['text_report_sale_return']          = 'Returns';
-$langs['text_report_sale_coupon']          = 'Coupons';
-$langs['text_report_product_viewed']       = 'Viewed';
-$langs['text_report_product_purchased']    = 'Purchased';
-$langs['text_report_customer_online']      = 'Customers Online';
-$langs['text_report_customer_order']       = 'Orders';
-$langs['text_report_customer_reward']      = 'Reward Points';
-$langs['text_report_customer_credit']      = 'Credit';
-$langs['text_report_affiliate_commission'] = 'Commission';
-$langs['text_review']                      = 'Reviews';
-$langs['text_return']                      = 'Returns';
-$langs['text_return_action']               = 'Return Actions';
-$langs['text_return_reason']               = 'Return Reasons';
-$langs['text_return_status']               = 'Return Statuses';
+$langs['text_product']                     = 'Product';
 $langs['text_sale']                        = 'Sales';
 $langs['text_shipping']                    = 'Shipping';
 $langs['text_setting']                     = 'Settings';
 $langs['text_stock_status']                = 'Stock Statuses';
-$langs['text_support']                     = 'Support Forum';
 $langs['text_system']                      = 'System';
 $langs['text_tax']                         = 'Taxes';
 $langs['text_tax_class']                   = 'Tax Classes';
 $langs['text_tax_rate']                    = 'Tax Rates';
 $langs['text_total']                       = 'Order Totals';
 $langs['text_user']                        = 'Users';
-$langs['text_documentation']               = 'Documentation';
 $langs['text_users']                       = 'Users';
 $langs['text_user_group']                  = 'User Groups';
-$langs['text_voucher']                     = 'Gift Vouchers';
-$langs['text_voucher_theme']               = 'Voucher Themes';
-$langs['text_weight_class']                = 'Weight Classes';
-$langs['text_length_class']                = 'Length Classes';
-$langs['text_zone']                        = 'Zones';
-$langs['text_openbay_extension']           = 'OpenBay Pro';
-$langs['text_openbay_dashboard']           = 'Dashboard';
-$langs['text_openbay_orders']              = 'Bulk order update';
-$langs['text_openbay_items']               = 'Manage items';
-$langs['text_openbay_ebay']                = 'eBay';
-$langs['text_openbay_amazon']              = 'Amazon (EU)';
-$langs['text_openbay_amazonus']            = 'Amazon (US)';
-$langs['text_openbay_play']                = 'Play.com (EU)';
-$langs['text_openbay_settings']            = 'Settings';
-$langs['text_openbay_links']               = 'Item links';
-$langs['text_openbay_report_price']        = 'Pricing report';
-$langs['text_openbay_order_import']        = 'Order import';
-
-$langs['text_paypal_manage']               = 'PayPal';
-$langs['text_paypal_search']               = 'Search';
-$langs['text_recurring_profile']           = 'Recurring Profiles';
diff --git a/admin/medium/admin/admin.php b/admin/medium/admin/admin.php
index f879bd5..c182f45 100644
--- a/admin/medium/admin/admin.php
+++ b/admin/medium/admin/admin.php
@@ -14,6 +14,8 @@ class Admin extends Medium{
 	}
 	
 	private function get($data){
-		
+
+		$uid=$data['uid'];
+		return SQL::admin('admin','getAdminByID',array($uid));
 	}
 }
\ No newline at end of file
diff --git a/admin/medium/common/login.php b/admin/medium/common/login.php
index 188cd1b..40ed4bc 100644
--- a/admin/medium/common/login.php
+++ b/admin/medium/common/login.php
@@ -27,7 +27,15 @@ class Login extends Medium{
 		S('ADMIN_UID',$admin['user_id']);
 
 		S('ADMIN',$admin);
+
+		$ip=getip();
+
+		$time=time();
+
+		$logged="{$_SERVER['HTTP_HOST']};{$ip};{$admin['user_id']};{$time}";
 		
+		C('ADMINLOGGED',encrypt($logged));
+
 		return true;
 	}
 }
\ No newline at end of file
diff --git a/admin/model/admin/admin.model.php b/admin/model/admin/admin.model.php
index 113ebb0..ec3daa1 100644
--- a/admin/model/admin/admin.model.php
+++ b/admin/model/admin/admin.model.php
@@ -8,4 +8,11 @@ class AdminMysql extends MysqlModel{
 		
 		return $this->get($sql);
 	}
+
+	public function getAdminByID($uid){
+
+		$sql="SELECT * FROM ".DB_PREFIX."user WHERE user_id={$uid}";
+
+		return $this->get($sql);
+	}
 }
\ No newline at end of file
diff --git a/admin/static/js/common.js b/admin/static/js/common.js
index 0f79942..e69de29 100755
--- a/admin/static/js/common.js
+++ b/admin/static/js/common.js
@@ -1,68 +0,0 @@
-$(document).ready(function() {
-	$('#menu > ul').superfish({
-		pathClass	 : 'overideThisToUse',
-		delay		 : 0,
-		animation	 : {height: 'show'},
-		speed		 : 'normal',
-		autoArrows   : false,
-		dropShadows  : false, 
-		disableHI	 : false, /* set to true to disable hoverIntent detection */
-		onInit		 : function(){},
-		onBeforeShow : function(){},
-		onShow		 : function(){},
-		onHide		 : function(){}
-	});
-	
-	$('#menu > ul').css('display', 'block');
-});
- 
-function getURLVar(key) {
-	var value = [];
-	
-	var query = String(document.location).split('?');
-	
-	if (query[1]) {
-		var part = query[1].split('&');
-
-		for (i = 0; i < part.length; i++) {
-			var data = part[i].split('=');
-			
-			if (data[0] && data[1]) {
-				value[data[0]] = data[1];
-			}
-		}
-		
-		if (value[key]) {
-			return value[key];
-		} else {
-			return '';
-		}
-	}
-} 
-
-$(document).ready(function() {
-	route = getURLVar('route');
-	
-	if (!route) {
-		$('#dashboard').addClass('selected');
-	} else {
-		part = route.split('/');
-		
-		url = part[0];
-		
-		if (part[1]) {
-			url += '/' + part[1];
-		}
-		
-		$('a[href*=\'' + url + '\']').parents('li[id]').addClass('selected');
-	}
-	
-	$('#menu ul li').on('click', function() {
-		$(this).addClass('hover');
-	});
-
-	$('#menu ul li').on('mouseout', function() {
-		$(this).removeClass('hover');
-	});	
-});
-
diff --git a/admin/view/default/common/footer.tpl b/admin/view/default/common/footer.tpl
index 44d5832..3aa02e8 100755
--- a/admin/view/default/common/footer.tpl
+++ b/admin/view/default/common/footer.tpl
@@ -2,6 +2,7 @@
 	<div id="footer"><?php echo $text_footer; ?></div>
 	<script type="text/javascript">
 	  $('#tabs a').tabs();
+	  $('#languages a').tabs();
 	</script>
 	</body>
 </html>
\ No newline at end of file
diff --git a/admin/view/default/common/header.tpl b/admin/view/default/common/header.tpl
index 83f69d6..8549315 100755
--- a/admin/view/default/common/header.tpl
+++ b/admin/view/default/common/header.tpl
@@ -10,44 +10,23 @@
     <link type="text/css" href="/admin/static/js/jquery/ui/themes/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
     <script type="text/javascript" src="/admin/static/js/jquery/tabs.js"></script>
     <script type="text/javascript" src="/admin/static/js/jquery/superfish/js/superfish.js"></script>
-    <script type="text/javascript" src="/admin/static/js/common.js"></script>
-    {literal}
-    <script type="text/javascript">
-    $(document).ready(function(){
-        // Confirm Delete
-        $('#form').submit(function(){
-            if ($(this).attr('action').indexOf('delete',1) != -1) {
-                if (!confirm('{$langs['text_confirm']}')) {
-                    return false;
-                }
-            }
-        });
-        // Confirm Uninstall
-        $('a').click(function(){
-            if ($(this).attr('href') != null && $(this).attr('href').indexOf('uninstall', 1) != -1) {
-                if (!confirm('{$langs['text_confirm']}')) {
-                    return false;
-                }
-            }
-        });
-            });
-        </script>
-      {/literal}
   </head>
   <body>
   <div id="container">
     <div id="header">
       <div class="div1">
-        <div class="div2"><img src="/admin/static/image/logo.png" title="{$heading_title}" onclick="" /></div>
-        {if $smarty.session.ADMIN_UID}
+        <div class="div2">
+          <img src="/admin/static/image/logo.png" title="{$heading_title}" onclick="" />
+        </div>
+        {if $smarty.session.AID}
           <div class="div3"><img src="/admin/static/image/lock.png" alt="" style="position: relative"></div>
         {/if}
       </div>
-      {if $smarty.session.ADMIN_UID}
+      {if $smarty.session.AID}
       <div id="menu">
         <ul class="left" style="">
-          <li id="dashboard"><a href="{$home}" class="top">{$langs['text_dashboard']}</a></li>
-          <li id="catalog"><a class="top">{$langs['text_catalog']}</a>
+          <li id="dashboard" class="{$selected['common']}"><a href="{$home}" class="top">{$langs['text_dashboard']}</a></li>
+          <li id="catalog" class="{$selected['product']}"><a class="top">{$langs['text_product']}</a>
             <ul>
               <li><a href="{$category}">{$langs['text_category']}</a></li>
               <li><a href="{$product}">{$langs['text_product']}</a></li>
@@ -60,7 +39,7 @@
               <li><a href="{$option}">{$langs['text_option']}</a></li>
             </ul>
           </li>
-          <li id="extension"><a class="top">{$langs['text_extension']}</a>
+          <li id="extension" class="{$selected['extension']}"><a class="top">{$langs['text_extension']}</a>
             <ul>
               <li><a href="{$module}">{$langs['text_module']}</a></li>
               <li><a href="{$shipping}">{$langs['text_shipping']}</a></li>
@@ -68,7 +47,7 @@
               <li><a href="{$total}">{$langs['text_total']}</a></li>
             </ul>
           </li>
-          <li id="sale"><a class="top">{$langs['text_sale']}</a>
+          <li id="sale" class="{$selected['sale']}"><a class="top">{$langs['text_sale']}</a>
             <ul>
               <li><a href="{$order}">{$langs['text_order']}</a></li>
               <li><a class="parent">{$langs['text_customer']}</a>
@@ -82,7 +61,7 @@
               <!-- PAYPAL MANAGE NAVIGATION LINK END -->
             </ul>
           </li>
-          <li id="system"><a class="top">{$langs['text_system']}</a>
+          <li id="system" class="{$selected['setting']}"><a class="top">{$langs['text_system']}</a>
             <ul>
               <li><a href="{$setting}">{$langs['text_setting']}</a></li>
               <li><a href="{$layout}">{$langs['text_layout']}</a></li>
@@ -109,3 +88,23 @@
       </div>
       {/if}
     </div>
+{literal}
+  <script type="text/javascript">
+    $(document).ready(function() {
+      $('#menu > ul').superfish({
+        pathClass  : 'overideThisToUse',
+        delay    : 0,
+        animation  : {height: 'show'},
+        speed    : 'normal',
+        autoArrows   : false,
+        dropShadows  : false, 
+        disableHI  : false, /* set to true to disable hoverIntent detection */
+        onInit     : function(){},
+        onBeforeShow : function(){},
+        onShow     : function(){},
+        onHide     : function(){}
+      });
+      $('#menu > ul').css('display', 'block');
+    });
+  </script>
+{/literal}
\ No newline at end of file
diff --git a/admin/view/default/extension/feed.tpl b/admin/view/default/extension/feed.tpl
deleted file mode 100755
index f654c40..0000000
--- a/admin/view/default/extension/feed.tpl
+++ /dev/null
@@ -1,48 +0,0 @@
-<?php echo $header; ?>
-<div id="content">
-  <div class="breadcrumb">
-    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
-    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
-    <?php } ?>
-  </div>
-  <?php if ($success) { ?>
-  <div class="success"><?php echo $success; ?></div>
-  <?php } ?>
-  <?php if ($error) { ?>
-  <div class="warning"><?php echo $error; ?></div>
-  <?php } ?>
-  <div class="box">
-    <div class="heading">
-      <h1><img src="view/image/feed.png" alt="" /> <?php echo $heading_title; ?></h1>
-    </div>
-    <div class="content">
-      <table class="list">
-        <thead>
-          <tr>
-            <td class="left"><?php echo $column_name; ?></td>
-            <td class="left"><?php echo $column_status; ?></td>
-            <td class="right"><?php echo $column_action; ?></td>
-          </tr>
-        </thead>
-        <tbody>
-          <?php if ($extensions) { ?>
-          <?php foreach ($extensions as $extension) { ?>
-          <tr>
-            <td class="left"><?php echo $extension['name']; ?></td>
-            <td class="left"><?php echo $extension['status'] ?></td>
-            <td class="right"><?php foreach ($extension['action'] as $action) { ?>
-              [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
-              <?php } ?></td>
-          </tr>
-          <?php } ?>
-          <?php } else { ?>
-          <tr>
-            <td class="center" colspan="8"><?php echo $text_no_results; ?></td>
-          </tr>
-          <?php } ?>
-        </tbody>
-      </table>
-    </div>
-  </div>
-</div>
-<?php echo $footer; ?>
\ No newline at end of file
diff --git a/admin/view/default/extension/manager.tpl b/admin/view/default/extension/manager.tpl
deleted file mode 100755
index 93b7396..0000000
--- a/admin/view/default/extension/manager.tpl
+++ /dev/null
@@ -1,47 +0,0 @@
-<?php echo $header; ?>
-<div id="content">
-  <div class="breadcrumb">
-    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
-    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
-    <?php } ?>
-  </div>
-  <div class="box">
-    <div class="heading">
-      <h1><img src="view/image/module.png" alt="" /> <?php echo $heading_title; ?></h1>
-      <div class="buttons"><a id="button-upload" class="button"><?php echo $button_upload; ?></a></div>
-    </div>
-    <div class="content">
-      <textarea wrap="off" style="width: 98%; height: 300px; padding: 5px; border: 1px solid #CCCCCC; background: #FFFFFF; overflow: scroll;"></textarea>
-    </div>
-  </div>
-</div>
-<script type="text/javascript" src="view/javascript/jquery/ajaxupload.js"></script> 
-<script type="text/javascript"><!--
-new AjaxUpload('#button-upload', {
-	action: 'index.php?route=extension/manage/upload&token=<?php echo $token; ?>',
-	name: 'file',
-	autoSubmit: true,
-	responseType: 'text',
-	onSubmit: function(file, extension) {
-		$('#button-upload').before('<img src="view/image/loading.gif" class="loading" style="padding-right: 5px;" />');
-		$('#button-upload').attr('disabled', true);
-	},
-	onComplete: function(file, json) {
-		$('.content').after(json);
-		/*
-		$('#button-upload').attr('disabled', false);
-		
-		if (json['success']) {
-			alert(json['success']);
-		}
-		
-		if (json['error']) {
-			alert(json['error']);
-		}
-		
-		$('.loading').remove();	
-		*/
-	}
-});
-//--></script>
-<?php echo $footer; ?>
\ No newline at end of file
diff --git a/admin/view/default/extension/module.tpl b/admin/view/default/extension/module.tpl
index 707e4b7..dc70bae 100755
--- a/admin/view/default/extension/module.tpl
+++ b/admin/view/default/extension/module.tpl
@@ -29,14 +29,12 @@
             <tr>
               <td class="left">{$langs[$module['code']]}</td>
               <td class="right">
-                [
                 {if $module['installed']} 
-                  <a href="/admin/module/{$module['code']}">edit</a>
-                  <a href="/admin/extension/module/uninstall?code={$module['code']}">uninstall</a>
+                  [<a href="/admin/module/{$module['code']}">{$langs['button_edit']}</a>]
+                  [<a href="/admin/extension/module/uninstall?code={$module['code']}">{$langs['text_uninstall']}</a>]
                 {else}
-                  <a href="/admin/extension/module/install?code={$module['code']}">install</a>
+                  [<a href="/admin/extension/module/install?code={$module['code']}">{$langs['text_install']}</a>]
                 {/if}
-                ]
               </td>
             </tr>
             {/foreach}
diff --git a/admin/view/default/extension/openbay.tpl b/admin/view/default/extension/openbay.tpl
deleted file mode 100755
index c6ca108..0000000
--- a/admin/view/default/extension/openbay.tpl
+++ /dev/null
@@ -1,161 +0,0 @@
-<?php echo $header; ?>
-<div id="content">
-    <div class="breadcrumb">
-        <?php foreach ($breadcrumbs as $breadcrumb) { ?>
-        <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
-        <?php } ?>
-    </div>
-    <?php if ($success) { ?>
-    <div class="success"><?php echo $success; ?></div>
-    <?php } ?>
-    <?php if ($error) { ?>
-    <div class="warning"><?php echo $error; ?></div>
-    <?php } ?>
-
-    <?php // error messages
-    if($this->data['mcrypt'] != 1){ echo'<div class="warning">'.$lang_mcrypt_text_false.'</div>';}
-    if($this->data['mbstring'] != 1){ echo'<div class="warning">'.$lang_mb_text_false.'</div>';}
-    if($this->data['ftpenabled'] != 1){ echo'<div class="warning">'.$lang_ftp_text_false.'</div>';}
-    if(VERSION < '1.5.1'){ echo'<div class="warning">' . $lang_error_oc_version . '</div>';}
-    ?>
-
-    <div class="box">
-        <div class="heading">
-            <a href="http://www.openbaypro.com" target="_BLANK"><img src="https://uk.openbaypro.com/asset/OpenBayPro_30px_h.png" alt="OpenBay Pro" style="margin-top:5px; margin-left:5px; border: 0px;;" border="0" /></a>
-        </div>
-        <div class="content" style="padding-right:0px;">
-            <div style="float:left; width:60%;">
-                <div style="clear:both;"></div>
-                <table class="list">
-                    <thead>
-                    <tr>
-                        <td class="left" width="60%"><?php echo $lang_column_name; ?></td>
-                        <td class="center" width="20%"><?php echo $lang_column_status; ?></td>
-                        <td class="right" width="20%"><?php echo $lang_column_action; ?></td>
-                    </tr>
-                    </thead>
-                    <tbody>
-                    <?php if ($extensions) { ?>
-                    <?php foreach ($extensions as $extension) { ?>
-                    <tr>
-                        <td class="left"><?php echo $extension['name']; ?></td>
-                        <td class="center"><?php echo $extension['status'] ?></td>
-                        <td class="right"><?php foreach ($extension['action'] as $action) { ?>
-                            [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
-                            <?php } ?></td>
-                    </tr>
-                    <?php } ?>
-                    <?php } else { ?>
-                    <tr>
-                        <td class="center" colspan="8"><?php echo $lang_text_no_results; ?></td>
-                    </tr>
-                    <?php } ?>
-                    </tbody>
-                </table>
-
-                <div class="openbayPod overviewPod" onclick="location='<?php echo $manage_link; ?>'">
-                    <img src="<?php echo HTTPS_SERVER . 'view/image/openbay/openbay_icon1.png'; ?>" title="<?php echo $lang_title_manage; ?>" alt="Manage icon" border="0" />
-                    <h3><?php echo $lang_pod_manage; ?></h3>
-                </div>
-
-                <a href="http://help.welfordmedia.co.uk/" target="_BLANK">
-                    <div class="openbayPod overviewPod">
-                        <img src="<?php echo HTTPS_SERVER . 'view/image/openbay/openbay_icon7.png'; ?>" title="<?php echo $lang_title_help; ?>" alt="Help icon" border="0" />
-                        <h3><?php echo $lang_pod_help; ?></h3>
-                    </div>
-                </a>
-
-                <a href="http://shop.openbaypro.com/?utm_campaign=OpenBayModule&utm_medium=referral&utm_source=shopbutton" target="_BLANK">
-                    <div class="openbayPod overviewPod">
-                        <img src="<?php echo HTTPS_SERVER . 'view/image/openbay/openbay_icon11.png'; ?>" title="<?php echo $lang_title_shop; ?>" alt="Shop icon" border="0" />
-                        <h3><?php echo $lang_pod_shop; ?></h3>
-                    </div>
-                </a>
-            </div>
-            <div style="float:right; width:40%; text-align:center;">
-
-                <div id="openbay_version" class="attention" style="background-image:none; margin:0px 20px 10px 20px; text-align:left;">
-                    <div id="openbay_version_loading"><img src="<?php echo HTTPS_SERVER; ?>view/image/loading.gif" /> <?php echo $lang_checking_version; ?></div>
-                </div>
-
-                <div id="openbay_notification" class="attention" style="background-image:none; margin: 0px 20px; text-align:left;">
-                    <div id="openbay_loading"><img src="<?php echo HTTPS_SERVER; ?>/view/image/loading.gif" /> <?php echo $lang_getting_messages; ?></div>
-                </div>
-
-            </div>
-        </div>
-    </div>
-</div>
-<script type="text/javascript"><!--
-    function getOpenbayVersion() {
-
-        var version = '<?php echo $openbay_version; ?>';
-
-        $('#openbay_version').empty().html('<div id="openbay_version_loading"><img src="<?php echo HTTPS_SERVER; ?>view/image/loading.gif" /> <?php echo $lang_checking_version; ?></div>');
-
-        setTimeout(function(){
-
-        var token = "<?php echo $_GET['token']; ?>";
-
-            $.ajax({
-                type: 'GET',
-                url: 'index.php?route=extension/openbay/getVersion&token='+token,
-                dataType: 'json',
-                success: function(json) {
-
-                    $('#openbay_version_loading').hide();
-
-                    if(version < json.version){
-                        $('#openbay_version').removeClass('attention').addClass('warning').append('<?php echo $lang_version_old_1; ?> v.'+version+', <?php echo $lang_version_old_2; ?> v.'+json.version);
-                    }else{
-                        $('#openbay_version').removeClass('attention').addClass('success').append('<?php echo $lang_latest; ?> (v.'+version+')');
-                    }
-                },
-                failure: function(){
-                    $('#openbay_version').html('<?php echo $lang_error_retry; ?><strong><span onclick="getOpenbayVersion();"><?php echo $lang_btn_retry; ?></span></strong>');
-                },
-                error: function() {
-                    $('#openbay_version').html('<?php echo $lang_error_retry; ?><strong><span onclick="getOpenbayVersion();"><?php echo $lang_btn_retry; ?></span></strong>');
-                }
-            });
-        },500);
-    }
-
-    function getOpenbayNotifications() {
-        $('#openbay_notification').empty().html('<div id="openbay_loading"><img src="<?php echo HTTPS_SERVER; ?>/view/image/loading.gif" /> <?php echo $lang_checking_messages; ?></div>');
-
-        var html = '';
-
-        setTimeout(function(){
-            $.ajax({
-                type: 'GET',
-                url: 'index.php?route=extension/openbay/getNotifications&token=<?php echo $this->request->get['token']; ?>',
-                dataType: 'json',
-                success: function(json) {
-                    html += '<h3 style="background: url(<?php echo HTTPS_SERVER; ?>/view/image/information.png) no-repeat top left;"><?php echo $lang_title_messages; ?></h3>';
-                    html += '<ul>';
-
-                    $.each(json, function(key, val){
-                        html += '<li>'+val+'</li>';
-                    });
-
-                    html += '</ul>';
-
-                    $('#openbay_notification').html(html);
-                },
-                failure: function(){
-                    $('#openbay_notification').html('Could not load messages. <strong><span onclick="getOpenbayNotifications();">Retry</span></strong>');
-                },
-                error: function() {
-                    $('#openbay_notification').html('Could not load messages. <strong><span onclick="getOpenbayNotifications();">Retry</span></strong>');
-                }
-            });
-        },500);
-    }
-
-    $(document).ready(function() {
-        getOpenbayVersion();
-        getOpenbayNotifications();
-    });
-//--></script>
-<?php echo $footer; ?>
\ No newline at end of file
diff --git a/admin/view/default/extension/openbay_itemlist.tpl b/admin/view/default/extension/openbay_itemlist.tpl
deleted file mode 100755
index ac4fc72..0000000
--- a/admin/view/default/extension/openbay_itemlist.tpl
+++ /dev/null
@@ -1,320 +0,0 @@
-<?php echo $header; ?>
-<div id="content">
-  <div class="breadcrumb">
-    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
-    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
-    <?php } ?>
-  </div>
-  <?php if ($error_warning) { ?>
-  <div class="warning"><?php echo $error_warning; ?></div>
-  <?php } ?>
-  <?php if ($success) { ?>
-  <div class="success"><?php echo $success; ?></div>
-  <?php } ?>
-  <div class="box">
-    <div class="heading">
-      <h1><img src="view/image/product.png" alt="" /> <?php echo $heading_title; ?></h1>
-      <div class="buttons"></div>
-    </div>
-    <div class="content">
-        <table class="list">
-            <thead>
-                <tr>
-                    <td colspan="6" class="left">Filter results</td>
-                </tr>
-            </thead>
-            <tbody>
-                <tr>
-                    <td style="font-weight:bold;" class="left">Title</td>
-                    <td class="left"><input type="text" name="filter_name" value="<?php echo $filter_name; ?>" size="35" /></td>
-                    <td style="font-weight:bold;" class="left">Stock range</td>
-                    <td class="left">
-                        <input type="text" name="filter_quantity" size="8" value="<?php echo $filter_quantity; ?>" style="text-align: left;" /> to
-                        <input type="text" name="filter_quantity_to" size="8" value="<?php echo $filter_quantity_to; ?>" style="text-align: left;" />
-                    </td>
-                    <td style="font-weight:bold;" class="left">Status</td>
-                    <td class="left">
-
-                        <select name="filter_status">
-                            <option value="*"></option>
-                            <?php if ($filter_status) { ?>
-                            <option value="1" selected="selected"><?php echo $text_enabled; ?></option>
-                            <?php } else { ?>
-                            <option value="1"><?php echo $text_enabled; ?></option>
-                            <?php } ?>
-                            <?php if (!is_null($filter_status) && !$filter_status) { ?>
-                            <option value="0" selected="selected"><?php echo $text_disabled; ?></option>
-                            <?php } else { ?>
-                            <option value="0"><?php echo $text_disabled; ?></option>
-                            <?php } ?>
-                        </select>
-
-                    </td>
-                </tr>
-                <tr>
-                    <td style="font-weight:bold;" class="left">Marketplace status</td>
-                    <td class="left">
-
-                        <select name="filter_marketplace">
-                            <option value="all" <?php echo (!isset($filter_marketplace) || $filter_marketplace == 'all' ? ' selected' : ''); ?>>All</option>
-                            <?php if($marketplace_statuses['ebay']) : ?>
-                            <option value="ebay_active" <?php echo ($filter_marketplace == 'ebay_active' ? ' selected' : ''); ?>>eBay active</option>
-                            <option value="ebay_inactive" <?php echo ($filter_marketplace == 'ebay_inactive' ? ' selected' : ''); ?>>eBay not active</option>
-                            <?php endif; ?>
-                            <?php if($marketplace_statuses['amazon']) : ?>
-                            <option value="amazon_saved" <?php echo ($filter_marketplace == 'amazon_saved' ? ' selected' : ''); ?>>Amazon EU saved</option>
-                            <option value="amazon_uploaded" <?php echo ($filter_marketplace == 'amazon_uploaded' ? ' selected' : ''); ?>>Amazon EU processing</option>
-                            <option value="amazon_ok" <?php echo ($filter_marketplace == 'amazon_ok' ? ' selected' : ''); ?>>Amazon EU active</option>
-                            <option value="amazon_error" <?php echo ($filter_marketplace == 'amazon_error' ? ' selected' : ''); ?>>Amazon EU failed</option>
-                            <option value="amazon_unlisted" <?php echo ($filter_marketplace == 'amazon_unlisted' ? ' selected' : ''); ?>>Amazon EU not listed</option>
-                            <option value="amazon_linked" <?php echo ($filter_marketplace == 'amazon_linked' ? ' selected' : ''); ?>>Amazon EU linked</option>
-                            <option value="amazon_not_linked" <?php echo ($filter_marketplace == 'amazon_not_linked' ? ' selected' : ''); ?>>Amazon EU not linked</option>
-                            <?php endif; ?>
-                            <?php if($marketplace_statuses['amazonus']) : ?>
-                            <option value="amazonus_saved" <?php echo ($filter_marketplace == 'amazonus_saved' ? ' selected' : ''); ?>>Amazon US saved</option>
-                            <option value="amazonus_uploaded" <?php echo ($filter_marketplace == 'amazonus_uploaded' ? ' selected' : ''); ?>>Amazon US processing</option>
-                            <option value="amazonus_ok" <?php echo ($filter_marketplace == 'amazonus_ok' ? ' selected' : ''); ?>>Amazon US active</option>
-                            <option value="amazonus_error" <?php echo ($filter_marketplace == 'amazonus_error' ? ' selected' : ''); ?>>Amazon US failed</option>
-                            <option value="amazonus_unlisted" <?php echo ($filter_marketplace == 'amazonus_unlisted' ? ' selected' : ''); ?>>Amazon US not listed</option>
-                            <option value="amazonus_linked" <?php echo ($filter_marketplace == 'amazonus_linked' ? ' selected' : ''); ?>>Amazon US linked</option>
-                            <option value="amazonus_not_linked" <?php echo ($filter_marketplace == 'amazonus_not_linked' ? ' selected' : ''); ?>>Amazon US not linked</option>
-                            <?php endif; ?>
-                            <?php if($marketplace_statuses['play']) : ?>
-                            <option value="play_active" <?php echo ($filter_marketplace == 'play_active' ? ' selected' : ''); ?>>Play.com active</option>
-                            <option value="play_pending" <?php echo ($filter_marketplace == 'play_pending' ? ' selected' : ''); ?>>Play.com pending new</option>
-                            <option value="play_processing" <?php echo ($filter_marketplace == 'play_processing' ? ' selected' : ''); ?>>Play.com processing</option>
-                            <option value="play_updating" <?php echo ($filter_marketplace == 'play_updating' ? ' selected' : ''); ?>>Play.com pending edit</option>
-                            <option value="play_stock_updating" <?php echo ($filter_marketplace == 'play_stock_updating' ? ' selected' : ''); ?>>Play.com stock updating</option>
-                            <option value="play_errors" <?php echo ($filter_marketplace == 'play_errors' ? ' selected' : ''); ?>>Play.com errors</option>
-                            <option value="play_failures" <?php echo ($filter_marketplace == 'play_failures' ? ' selected' : ''); ?>>Play.com failures</option>
-                            <option value="play_inactive" <?php echo ($filter_marketplace == 'play_inactive' ? ' selected' : ''); ?>>Play.com not active</option>
-                            <option value="play_pending_delete" <?php echo ($filter_marketplace == 'play_pending_delete' ? ' selected' : ''); ?>>Play.com pending delete</option>
-                            <?php endif; ?>
-                        </select>
-
-                    </td>
-                    <td style="font-weight:bold;" class="left">Price range</td>
-                    <td class="left">
-                        <input type="text" name="filter_price" value="<?php echo $filter_price; ?>" size="8"/> to
-                        <input type="text" name="filter_price_to" value="<?php echo $filter_price_to; ?>" size="8"/>
-                    </td>
-                    <td style="font-weight:bold;" class="left">Model</td>
-                    <td class="left"><input type="text" name="filter_model" value="<?php echo $filter_model; ?>" /></td>
-                </tr>
-                <tr>
-                    <td style="font-weight:bold;" class="left">Category</td>
-                    <td class="left">
-
-                        <select name="filter_category">
-                            <option value=""></option>
-                            <option value="none">Missing category</option>
-                            <?php foreach($category_list as $cat) { ?>
-                                <option value="<?php echo $cat['cid']; ?>"<?php echo ($filter_category == $cat["cid"] ? " selected" : ""); ?>><?php echo $cat['name']; ?></option>
-                            <?php } ?>
-                        </select>
-
-                    </td>
-                    <td style="font-weight:bold;" class="left">Manufacturer</td>
-                    <td class="left">
-
-                        <select name="filter_manufacturer">
-                            <option value=""></option>
-                            <?php foreach($manufacturer_list as $man) { ?>
-                                <option value="<?php echo $man['manufacturer_id']; ?>"<?php echo ($filter_manufacturer == $man["manufacturer_id"] ? " selected" : ""); ?>><?php echo $man['name']; ?></option>
-                            <?php } ?>
-                        </select>
-
-                    </td>
-                    <td style="font-weight:bold;" class="left">Populated</td>
-                    <td class="left">
-                        <label for="filter_sku">SKU</label>
-                        <input type="checkbox" name="filter_sku" id="filter_sku" value="1" <?php if($filter_sku == 1){ echo 'checked="checked" ';} ?>/>
-                        <label for="filter_desc">Description</label>
-                        <input type="checkbox" name="filter_desc" id="filter_desc" value="1" <?php if($filter_desc == 1){ echo 'checked="checked" ';} ?>/>
-                    </td>
-                </tr>
-            <tr>
-                <td colspan="6" class="right"><a onclick="filter();" class="button"><?php echo $button_filter; ?></a></td>
-            </tr>
-            </tbody>
-        </table>
-
-
-        <table class="list">
-          <thead>
-            <tr>
-              <td width="1" style="text-align: center;"><input type="checkbox" onclick="$('input[name*=\'selected\']').attr('checked', this.checked);" /></td>
-              <td class="center"><?php echo $column_image; ?></td>
-              <td class="left"><?php if ($sort == 'pd.name') { ?>
-                <a href="<?php echo $sort_name; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_name; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_name; ?>"><?php echo $column_name; ?></a>
-                <?php } ?></td>
-              <td class="left"><?php if ($sort == 'p.model') { ?>
-                <a href="<?php echo $sort_model; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_model; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_model; ?>"><?php echo $column_model; ?></a>
-                <?php } ?></td>
-              <td class="left"><?php if ($sort == 'p.price') { ?>
-                <a href="<?php echo $sort_price; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_price; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_price; ?>"><?php echo $column_price; ?></a>
-                <?php } ?></td>
-              <td class="right"><?php if ($sort == 'p.quantity') { ?>
-                <a href="<?php echo $sort_quantity; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_quantity; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_quantity; ?>"><?php echo $column_quantity; ?></a>
-                <?php } ?></td>
-              <td class="left"><?php if ($sort == 'p.status') { ?>
-                <a href="<?php echo $sort_status; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_status; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_status; ?>"><?php echo $column_status; ?></a>
-                <?php } ?></td>
-                <td width="230"><?php echo $lang_markets; ?></td>
-            </tr>
-          </thead>
-          <tbody>
-            <?php if ($products) { ?>
-            <?php foreach ($products as $product) { ?>
-            <tr>
-              <td style="text-align: center;"><?php if ($product['selected']) { ?>
-                <input type="checkbox" name="selected[]" value="<?php echo $product['item_id']; ?>" checked="checked" />
-                <?php } else { ?>
-                <input type="checkbox" name="selected[]" value="<?php echo $product['item_id']; ?>" />
-                <?php } ?></td>
-              <td class="center"><img src="<?php echo $product['image']; ?>" alt="<?php echo $product['name']; ?>" style="padding: 1px; border: 1px solid #DDDDDD;" /></td>
-              <td class="left"><a href="<?php echo $product['edit']; ?>"><?php echo $product['name']; ?></a></td>
-              <td class="left"><?php echo $product['model']; ?></td>
-              <td class="left"><?php if ($product['special']) { ?>
-                <span style="text-decoration: line-through;"><?php echo $product['price']; ?></span><br/>
-                <span style="color: #b00;"><?php echo $product['special']; ?></span>
-                <?php } else { ?>
-                <?php echo $product['price']; ?>
-                <?php } ?></td>
-              <td class="right">
-                <?php if($product['has_option'] == 0){ ?>
-                <?php if ($product['quantity'] <= 0) { ?>
-                    <span style="color: #FF0000;"><?php echo $product['quantity']; ?></span>
-                <?php } elseif ($product['quantity'] <= 5) { ?>
-                    <span style="color: #FFA500;"><?php echo $product['quantity']; ?></span>
-                <?php } else { ?>
-                    <span style="color: #008000;"><?php echo $product['quantity']; ?></span>
-                <?php } }else{ ?>
-                    <span style="color: #000000;"><?php echo $product['vCount']; ?> variations</span><br />
-                    <span style="color: #000000;"><?php echo $product['vsCount']; ?> stock</span>
-                <?php } ?>
-              </td>
-              <td class="left"><?php echo $product['status']; ?></td>
-                <td>
-                    <?php foreach ($product['markets'] as $market) { ?>
-                    <div style="display:none;" id="tooltip<?php echo $product['item_id']; ?>"></div>
-                    <?php if($market['href'] != ''){ ?>
-                    <a href="<?php echo $market['href']; ?>" title="<?php echo $market['text']; ?>"><img width="45" height="45" style="margin-right:8px;" src="<?php echo $market['img']; ?>" onMouseOut="hideTooltip('tooltip<?php echo $product['item_id']; ?>')" onMouseOver="showTooltip('tooltip<?php echo $product['item_id']; ?>', '<?php echo $market['name']; ?>', '<?php echo $market['text']; ?>')" /></a>
-                    <?php }else{ ?>
-                    <img width="45" height="45" style="margin-right:8px;" src="<?php echo $market['img']; ?>" onMouseOut="hideTooltip('tooltip<?php echo $product['item_id']; ?>')" onMouseOver="showTooltip('tooltip<?php echo $product['item_id']; ?>', '<?php echo $market['name']; ?>', '<?php echo $market['text']; ?>')"/>
-                    <?php } ?>
-                    <?php } ?>
-                </td>
-            </tr>
-            <?php } ?>
-            <?php } else { ?>
-            <tr>
-              <td class="center" colspan="8"><?php echo $text_no_results; ?></td>
-            </tr>
-            <?php } ?>
-          </tbody>
-        </table>
-      <div class="pagination"><?php echo $pagination; ?></div>
-    </div>
-  </div>
-</div>
-<script type="text/javascript"><!--
-function filter() {
-	url = 'index.php?route=extension/openbay/itemList&token=<?php echo $token; ?>';
-	
-	var filter_name = $('input[name=\'filter_name\']').attr('value');
-	
-	if (filter_name) {
-		url += '&filter_name=' + encodeURIComponent(filter_name);
-	}
-	
-	var filter_model = $('input[name=\'filter_model\']').attr('value');
-	
-	if (filter_model) {
-		url += '&filter_model=' + encodeURIComponent(filter_model);
-	}
-
-    var filter_price = $('input[name=\'filter_price\']').attr('value');
-
-    if (filter_price) {
-        url += '&filter_price=' + encodeURIComponent(filter_price);
-    }
-
-    var filter_price_to = $('input[name=\'filter_price_to\']').attr('value');
-
-    if (filter_price) {
-        url += '&filter_price_to=' + encodeURIComponent(filter_price_to);
-    }
-
-    var filter_quantity = $('input[name=\'filter_quantity\']').attr('value');
-
-    if (filter_quantity) {
-        url += '&filter_quantity=' + encodeURIComponent(filter_quantity);
-    }
-
-    var filter_quantity_to = $('input[name=\'filter_quantity_to\']').attr('value');
-
-    if (filter_quantity_to) {
-        url += '&filter_quantity_to=' + encodeURIComponent(filter_quantity_to);
-    }
-
-    var filter_status = $('select[name=\'filter_status\']').attr('value');
-
-    if (filter_status != '*') {
-        url += '&filter_status=' + encodeURIComponent(filter_status);
-    }
-
-    var filter_sku = $('input[name=\'filter_sku\']:checked').attr('value');
-
-    if (filter_sku) {
-        url += '&filter_sku=' + encodeURIComponent(filter_sku);
-    }
-
-    var filter_desc = $('input[name=\'filter_desc\']:checked').attr('value');
-
-    if (filter_desc) {
-        url += '&filter_desc=' + encodeURIComponent(filter_desc);
-    }
-
-    var filter_category = $('select[name=\'filter_category\']').attr('value');
-
-    if (filter_category) {
-        url += '&filter_category=' + encodeURIComponent(filter_category);
-    }
-
-    var filter_manufacturer = $('select[name=\'filter_manufacturer\']').attr('value');
-
-    if (filter_manufacturer) {
-        url += '&filter_manufacturer=' + encodeURIComponent(filter_manufacturer);
-    }
-
-    var filter_marketplace = $('select[name=\'filter_marketplace\']').attr('value');
-
-    if (filter_marketplace) {
-        url += '&filter_marketplace=' + encodeURIComponent(filter_marketplace);
-    }
-
-    location = url;
-}
-//--></script>
-<script type="text/javascript">
-    <?php  if ($this->config->get('openbay_status') == '1') { ?>
-        $('.buttons').prepend('<a onclick="bulkUpload();" class="button"><span><?php echo $lang_bulk_btn; ?></span></a>');
-
-        function bulkUpload(){
-            $('#form').attr('action', 'index.php?route=openbay/openbay/createBulk&token=<?php echo $this->request->get['token']; ?>');
-            $('#form').submit();
-        }
-    <?php } ?>
-</script>
-<?php echo $footer; ?>
\ No newline at end of file
diff --git a/admin/view/default/extension/openbay_links.tpl b/admin/view/default/extension/openbay_links.tpl
deleted file mode 100755
index 4c5a26e..0000000
--- a/admin/view/default/extension/openbay_links.tpl
+++ /dev/null
@@ -1,25 +0,0 @@
-<div id="tab-openbay" style="display:none;">
-    <table class="list">
-        <thead>
-        <tr>
-            <td class="left"><?php echo $lang_marketplace; ?></td>
-            <td class="center"><?php echo $lang_status; ?></td>
-            <td class="right"><?php echo $lang_option; ?></td>
-        </tr>
-        </thead>
-        <tfoot>
-            <?php foreach ($markets as $market) { ?>
-            <tr>
-                <td class="left"><?php echo $market['name']; ?></td>
-                <td class="center"><img style="display:inline; position:relative; top:3px;" src="view/image/<?php if($market['status'] == 1){echo'success';}else{echo'delete';} ?>.png" /></td>
-                <td class="right">
-                    <?php if($market['href'] != ''){ ?>
-                        <a href="<?php echo $market['href']; ?>"<?php if($market['target'] != ''){ echo' target="'.$market['target'].'"'; } ?>><?php echo $market['text']; ?></a>
-                    <?php }else{ ?>
-                        <?php echo $market['text']; ?>
-                    <?php } ?>
-                </td>
-            <?php } ?>
-        </tfoot>
-    </table>
-</div>
\ No newline at end of file
diff --git a/admin/view/default/extension/openbay_manage.tpl b/admin/view/default/extension/openbay_manage.tpl
deleted file mode 100755
index 19c10b2..0000000
--- a/admin/view/default/extension/openbay_manage.tpl
+++ /dev/null
@@ -1,248 +0,0 @@
-<?php echo $header; ?>
-<div id="content">
-    <div class="breadcrumb">
-<?php 
-        foreach ($breadcrumbs as $breadcrumb) {
-            echo $breadcrumb['separator'].'<a href="'.$breadcrumb['href'].'">'.$breadcrumb['text'].'</a>';
-        } 
-?>
-    </div>
-
-    <div class="box mBottom130">
-        <div class="left"></div>
-        <div class="right"></div>
-        <div class="heading">
-            <h1><?php echo $lang_text_manager; ?></h1>
-            <div class="buttons"><a onclick="validateForm(); return false;" class="button"><span><?php echo $lang_btn_save; ?></span></a><a onclick="location = '<?php echo $cancel; ?>';" class="button"><span><?php echo $lang_btn_cancel; ?></span></a></div>
-        </div>
-        <div class="content">
-            <div id="tabs" class="htabs">
-                <a href="#tab-updates"><?php echo $lang_btn_update; ?></a>
-                <a href="#tab-settings"><?php echo $lang_btn_settings; ?></a>
-                <a href="#tab-patch"><?php echo $lang_btn_patch; ?></a>
-                <a href="#tab-help"><?php echo $lang_tab_help; ?></a>
-            </div>
-
-            <form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form">
-                <div id="tab-updates">
-                    <p><?php echo $lang_patch_notes1; ?> <a href="http://shop.openbaypro.com/index.php?route=information/information/changelog" title="OpenBay Pro change log" target="_BLANK"><?php echo $lang_patch_notes2; ?></a></p>
-                    
-                    <table class="form">
-                        <tr>
-                            <td><?php echo $lang_installed_version; ?>:</td>
-                            <td id="openBayVersionText">
-                                <?php echo $txt_obp_version; ?>
-                            </td>
-                            <input type="hidden" name="openbay_version" value="<?php echo $openbay_version;?>" id="openbay_version" />
-                        </tr>
-                        <tr>
-                            <td><label for="openbay_ftp_username"><?php echo $field_ftp_user; ?></label></td>
-                            <td><input class="ftpsetting width250" type="text" name="openbay_ftp_username" id="openbay_ftp_username" maxlength="" value="<?php echo $openbay_ftp_username;?>" /></td>
-                        </tr>
-                        <tr>
-                            <td><label for="openbay_ftp_pw"><?php echo $field_ftp_pw; ?></label></td>
-                            <td><input class="ftpsetting width250" type="text" name="openbay_ftp_pw" id="openbay_ftp_pw" maxlength="" value="<?php echo $openbay_ftp_pw;?>" /></td>
-                        </tr>
-                        <tr>
-                            <td><label for="openbay_ftp_server"><?php echo $field_ftp_server_address; ?></label></td>
-                            <td><input class="ftpsetting width250" type="text" name="openbay_ftp_server" id="openbay_ftp_server" maxlength="" value="<?php echo $openbay_ftp_server;?>" /></td>
-                        </tr>
-                        <tr>
-                            <td><label for="openbay_ftp_rootpath"><?php echo $field_ftp_root_path; ?><span class="help"><?php echo $field_ftp_root_path_info; ?></span></label></td>
-                            <td><input class="ftpsetting width250" type="text" name="openbay_ftp_rootpath" id="openbay_ftp_rootpath" maxlength="" value="<?php echo $openbay_ftp_rootpath;?>" /></td>
-                        </tr>
-                        </tr>
-                        <tr>
-                            <td><label for="openbay_admin_directory"><?php echo $lang_admin_dir; ?><span class="help"><?php echo $lang_admin_dir_desc; ?></span></label></td>
-                            <td><input class="ftpsetting width250" type="text" name="openbay_admin_directory" id="openbay_admin_directory" maxlength="" value="<?php echo $openbay_admin_directory;?>" /></td>
-                        </tr>
-                        <tr>
-                            <td><label for="openbay_ftp_pasv"><?php echo $lang_use_pasv; ?></label></td>
-                            <td>
-                                <input class="ftpsetting" type="hidden" name="openbay_ftp_pasv" value="0" />
-                                <input class="ftpsetting" type="checkbox" name="openbay_ftp_pasv" id="openbay_ftp_pasv" value="1" <?php if(isset($openbay_ftp_pasv) && $openbay_ftp_pasv == 1){ echo 'checked="checked"'; } ?> />
-                            </td>
-                        </tr>
-                        <tr>
-                            <td><label for="openbay_ftp_beta"><?php echo $lang_use_beta; ?><span class="help"><?php echo $lang_use_beta_2; ?></span></label></td>
-                            <td>
-                                <input class="ftpsetting" type="hidden" name="openbay_ftp_beta" value="0" />
-                                <input class="ftpsetting" type="checkbox" name="openbay_ftp_beta" id="openbay_ftp_beta" value="1" <?php if(isset($openbay_ftp_beta) && $openbay_ftp_beta == 1){ echo 'checked="checked"'; } ?> />
-                            </td>
-                        </tr>
-                        <tr id="ftpTestRow">
-                            <td height="50" valign="middle"><?php echo $lang_test_conn; ?></td>
-                            <td>
-                                <a onclick="ftpTest();" class="button" id="ftpTest"><span><?php echo $lang_btn_test; ?></span></a>
-                                <img src="<?php echo HTTPS_SERVER; ?>view/image/loading.gif" id="imageFtpTest" class="displayNone"/>
-                            </td>
-                        </tr>
-                        <tr id="ftpUpdateRow" class="displayNone">
-                            <td height="50" valign="middle"><?php echo $lang_text_run_1; ?></td>
-                            <td><span id="preFtpTestText"><?php echo $lang_text_run_2; ?></span>
-                                <a onclick="updateModule();" class="button displayNone" id="moduleUpdate"><span><?php echo $lang_btn_update; ?></span></a>
-                                <img src="<?php echo HTTPS_SERVER; ?>view/image/loading.gif" id="imageModuleUpdate" class="displayNone" />
-                            </td>
-                        </tr>
-                        <tr>
-                            <td colspan="2" id="updateBox"></td>
-                        </tr>
-                    </table>
-                </div>
-
-                <div id="tab-settings">
-                    <table class="form">
-                        <tr>
-                            <td ><?php echo $lang_language; ?></td>
-                            <td>
-                                <select name="openbay_language">
-                                    <?php foreach($languages as $key => $language){ ?>
-                                        <option value="<?php echo $key; ?>" <?php if($key == $openbay_language){ echo'selected="selected"'; } ?>><?php echo $language; ?></option>
-                                    <?php } ?>
-                                </select>
-                            </td>
-                        </tr>
-                        <tr>
-                            <td valign="middle"><label for=""><?php echo $lang_clearfaq; ?></td>
-                            <td><a onclick="clearFaq();" class="button" id="clearFaq"><span><?php echo $lang_clearfaqbtn; ?></span></a><img src="<?php echo HTTPS_SERVER; ?>view/image/loading.gif" id="imageClearFaq" class="displayNone" /></td>
-                        </tr>
-                    </table>
-                </div>
-
-                <div id="tab-patch">
-                    <table class="form">
-                        <tr>
-                            <td ><?php echo $lang_run_patch_desc; ?></td>
-                            <td><a onclick="runPatch();" class="button" id="runPatch"><span><?php echo $lang_run_patch; ?></span></a><img src="<?php echo HTTPS_SERVER; ?>view/image/loading.gif" id="imageRunPatch" class="displayNone" /></td>
-                        </tr>
-                    </table>
-                </div>
-
-                <div id="tab-help">
-                    <h2><?php echo $lang_help_title; ?></h2>
-                    <table class="form">
-                        <tr>
-                            <td class="p10"><?php echo $lang_help_support_title; ?></td>
-                            <td class="p10"><?php echo $lang_help_support_description; ?></td>
-                        </tr>
-                        <tr>
-                            <td class="p10"><?php echo $lang_help_template_title; ?></td>
-                            <td class="p10"><?php echo $lang_help_template_description; ?></td>
-                        </tr>
-                        <tr>
-                            <td class="p10"><?php echo $lang_help_guide; ?></td>
-                            <td class="p10"><?php echo $lang_help_guide_description; ?></td>
-                        </tr>
-                    </table>
-                </div>
-            </form>
-        </div>
-    </div>
-</div>
-
-<script type="text/javascript">
-    
-    var token = "<?php echo $_GET['token']; ?>";
-    
-    $('.ftpsetting').keypress(function(){
-        $('#preFtpTestText').show();
-        $('#moduleUpdate').hide();
-        $('#ftpTestRow').show();
-        $('#ftpUpdateRow').hide();
-    });
-
-    function ftpTest(){
-        $.ajax({
-            url: 'index.php?route=extension/openbay/ftpTestConnection&token='+token,
-            type: 'post',
-            data: $('.ftpsetting').serialize(),
-            dataType: 'json',
-            beforeSend: function(){
-                $('#ftpTest').hide();
-                $('#imageFtpTest').show();
-            },
-            success: function(json) {
-                alert(json.msg);
-
-                if(json.connection == true){
-                    $('#preFtpTestText').hide();
-                    $('#moduleUpdate').show();
-                    $('#ftpTestRow').hide();
-                    $('#ftpUpdateRow').show();
-                }
-
-                $('#ftpTest').show();
-                $('#imageFtpTest').hide();
-            }
-        });
-    }
-
-    function runPatch(){
-        $.ajax({
-            url: 'index.php?route=extension/openbay/runPatch&token='+token,
-            type: 'post',
-            dataType: 'json',
-            beforeSend: function(){
-                $('#runPatch').hide();
-                $('#imageRunPatch').show();
-            },
-            success: function() {
-                alert('<?php echo $lang_patch_applied; ?>');
-                $('#runPatch').show();
-                $('#imageRunPatch').hide();
-            }
-        });
-    }
-
-    function updateModule(){
-        $.ajax({
-            url: 'index.php?route=extension/openbay/ftpUpdateModule&token='+token,
-            type: 'post',
-            data: $('.ftpsetting').serialize(),
-            dataType: 'json',
-            beforeSend: function(){ 
-                $('#moduleUpdate').hide();
-                $('#imageModuleUpdate').show();
-            },
-            success: function(json) {
-                alert(json.msg);
-                $('#openBayVersionText').text(json.version);
-                $('#openbay_version').val(json.version);
-                $('#moduleUpdate').show();
-                $('#imageModuleUpdate').hide();
-            }
-        });
-    }
-    
-    function validateForm(){
-        $('#form').submit();
-    }
-
-    function clearFaq(){
-        $.ajax({
-            url: 'index.php?route=extension/openbay/faqClear&token='+token,
-            beforeSend: function(){
-                $('#clearFaq').hide();
-                $('#imageClearFaq').show();
-            },
-            type: 'post',
-            dataType: 'json',
-            success: function(json) {
-                $('#clearFaq').show(); $('#imageClearFaq').hide();
-            },
-            failure: function(){
-                $('#imageClearFaq').hide();
-                $('#clearFaq').show();
-            },
-            error: function(){
-                $('#imageClearFaq').hide();
-                $('#clearFaq').show();
-            }
-        });
-    }
-
-</script>
-
-<script type="text/javascript"><!--
-$('#tabs a').tabs();
-//--></script> 
diff --git a/admin/view/default/extension/openbay_orderlist.tpl b/admin/view/default/extension/openbay_orderlist.tpl
deleted file mode 100755
index d9cedee..0000000
--- a/admin/view/default/extension/openbay_orderlist.tpl
+++ /dev/null
@@ -1,201 +0,0 @@
-<?php echo $header; ?>
-<div id="content">
-  <div class="breadcrumb">
-    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
-    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
-    <?php } ?>
-  </div>
-  <?php if ($error_warning) { ?>
-  <div class="warning"><?php echo $error_warning; ?></div>
-  <?php } ?>
-  <?php if ($success) { ?>
-  <div class="success"><?php echo $success; ?></div>
-  <?php } ?>
-  <div class="box">
-
-    <div class="heading">
-      <h1><img src="view/image/order.png" alt="" /> <?php echo $heading_title; ?></h1>
-      <div class="buttons">
-          <form action="<?php echo $link_update; ?>" method="post" enctype="multipart/form-data" id="form">
-
-          <select name="change_order_status_id">
-              <?php foreach ($order_statuses as $order_status) { ?>
-                <option value="<?php echo $order_status['order_status_id']; ?>"><?php echo $order_status['name']; ?></option>
-              <?php } ?>
-          </select>
-
-          <a onclick="$('#form').submit();" class="button"><span><?php echo $lang_btn_status; ?></span></a>
-      </div>
-    </div>
-    <div class="content">
-
-        <table class="list">
-          <thead>
-            <tr>
-              <td width="1" style="text-align: center;"><input type="checkbox" onclick="$('input[name*=\'selected\']').attr('checked', this.checked);" /></td>
-              <td class="right"><?php if ($sort == 'o.order_id') { ?>
-                <a href="<?php echo $sort_order; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_order_id; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_order; ?>"><?php echo $column_order_id; ?></a>
-                <?php } ?></td>
-              <td class="left"><?php if ($sort == 'customer') { ?>
-                <a href="<?php echo $sort_customer; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_customer; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_customer; ?>"><?php echo $column_customer; ?></a>
-                <?php } ?></td>
-              <td class="left"><?php if ($sort == 'status') { ?>
-                <a href="<?php echo $sort_status; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_status; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_status; ?>"><?php echo $column_status; ?></a>
-                <?php } ?></td>
-              <td class="right"><?php echo $lang_order_channel; ?></td>
-              <td class="left"><?php if ($sort == 'o.date_added') { ?>
-                <a href="<?php echo $sort_date_added; ?>" class="<?php echo strtolower($order); ?>"><?php echo $column_date_added; ?></a>
-                <?php } else { ?>
-                <a href="<?php echo $sort_date_added; ?>"><?php echo $column_date_added; ?></a>
-                <?php } ?></td>
-              <td class="left"></td>
-              <td class="right"><?php echo $column_action; ?></td>
-            </tr>
-          </thead>
-          <tbody>
-            <tr class="filter">
-              <td></td>
-              <td align="right"><input type="text" name="filter_order_id" value="<?php echo $filter_order_id; ?>" size="4" style="text-align: right;" /></td>
-              <td><input type="text" name="filter_customer" value="<?php echo $filter_customer; ?>" /></td>
-              <td><select name="filter_order_status_id">
-                  <option value="*"></option>
-                  <?php if ($filter_order_status_id == '0') { ?>
-                  <option value="0" selected="selected"><?php echo $text_missing; ?></option>
-                  <?php } else { ?>
-                  <option value="0"><?php echo $text_missing; ?></option>
-                  <?php } ?>
-                  <?php foreach ($order_statuses as $order_status) { ?>
-                  <?php if ($order_status['order_status_id'] == $filter_order_status_id) { ?>
-                  <option value="<?php echo $order_status['order_status_id']; ?>" selected="selected"><?php echo $order_status['name']; ?></option>
-                  <?php } else { ?>
-                  <option value="<?php echo $order_status['order_status_id']; ?>"><?php echo $order_status['name']; ?></option>
-                  <?php } ?>
-                  <?php } ?>
-                </select></td>
-              <td align="right"></td>
-              <td><input type="text" name="filter_date_added" value="<?php echo $filter_date_added; ?>" size="12" class="date" /></td>
-              <td></td>
-              <td align="right"><a onclick="filter();" class="button"><?php echo $button_filter; ?></a></td>
-            </tr>
-            <?php if ($orders) { ?>
-            <?php foreach ($orders as $order) { ?>
-            <tr>
-              <td style="text-align: center;"><?php if ($order['selected']) { ?>
-                <input type="checkbox" name="selected[]" value="<?php echo $order['order_id']; ?>" checked="checked" />
-                <?php } else { ?>
-                <input type="checkbox" name="selected[]" value="<?php echo $order['order_id']; ?>" />
-                <?php } ?></td>
-              <td class="right"><?php echo $order['order_id']; ?></td>
-              <td class="left"><?php echo $order['customer']; ?></td>
-              <td class="left"><?php echo $order['status']; ?></td>
-              <td class="right"><?php echo $order['channel']; ?></td>
-              <td class="left"><?php echo $order['date_added']; ?></td>
-              <td class="left"></td>
-              <td class="right"><?php foreach ($order['action'] as $action) { ?>
-                [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
-                <?php } ?></td>
-            </tr>
-            <?php } ?>
-            <?php } else { ?>
-            <tr>
-              <td class="center" colspan="8"><?php echo $text_no_results; ?></td>
-            </tr>
-            <?php } ?>
-          </tbody>
-        </table>
-      </form>
-      <div class="pagination"><?php echo $pagination; ?></div>
-    </div>
-  </div>
-</div>
-<script type="text/javascript"><!--
-function filter() {
-	url = 'index.php?route=extension/openbay/orderList&token=<?php echo $token; ?>';
-	
-	var filter_order_id = $('input[name=\'filter_order_id\']').attr('value');
-	
-	if (filter_order_id) {
-		url += '&filter_order_id=' + encodeURIComponent(filter_order_id);
-	}
-	
-	var filter_customer = $('input[name=\'filter_customer\']').attr('value');
-	
-	if (filter_customer) {
-		url += '&filter_customer=' + encodeURIComponent(filter_customer);
-	}
-	
-	var filter_order_status_id = $('select[name=\'filter_order_status_id\']').attr('value');
-	
-	if (filter_order_status_id != '*') {
-		url += '&filter_order_status_id=' + encodeURIComponent(filter_order_status_id);
-	}
-	
-	var filter_date_added = $('input[name=\'filter_date_added\']').attr('value');
-	
-	if (filter_date_added) {
-		url += '&filter_date_added=' + encodeURIComponent(filter_date_added);
-	}
-				
-	location = url;
-}
-//--></script>  
-<script type="text/javascript"><!--
-$(document).ready(function() {
-	$('.date').datepicker({dateFormat: 'yy-mm-dd'});
-});
-//--></script> 
-<script type="text/javascript"><!--
-$('#form input').keydown(function(e) {
-	if (e.keyCode == 13) {
-		filter();
-	}
-});
-//--></script> 
-<script type="text/javascript"><!--
-$.widget('custom.catcomplete', $.ui.autocomplete, {
-	_renderMenu: function(ul, items) {
-		var self = this, currentCategory = '';
-		
-		$.each(items, function(index, item) {
-			if (item.category != currentCategory) {
-				ul.append('<li class="ui-autocomplete-category">' + item.category + '</li>');
-				
-				currentCategory = item.category;
-			}
-			
-			self._renderItem(ul, item);
-		});
-	}
-});
-
-$('input[name=\'filter_customer\']').catcomplete({
-	delay: 0,
-	source: function(request, response) {
-		$.ajax({
-			url: 'index.php?route=sale/customer/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
-			dataType: 'json',
-			success: function(json) {		
-				response($.map(json, function(item) {
-					return {
-						category: item.customer_group,
-						label: item.name,
-						value: item.customer_id
-					}
-				}));
-			}
-		});
-	}, 
-	select: function(event, ui) {
-		$('input[name=\'filter_customer\']').val(ui.item.label);
-						
-		return false;
-	}
-});
-//--></script> 
-<?php echo $footer; ?>
\ No newline at end of file
diff --git a/admin/view/default/extension/openbay_orderlist_confirm.tpl b/admin/view/default/extension/openbay_orderlist_confirm.tpl
deleted file mode 100755
index 68f62ff..0000000
--- a/admin/view/default/extension/openbay_orderlist_confirm.tpl
+++ /dev/null
@@ -1,256 +0,0 @@
-<?php echo $header; ?>
-<div id="content">
-  <div class="breadcrumb">
-    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
-    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
-    <?php } ?>
-  </div>
-  <div class="box">
-    <div class="heading">
-      <h1><img src="view/image/order.png" alt="" /> <?php echo $lang_confirm_title; ?></h1>
-      <div class="buttons">
-          <a href="<?php echo $link_cancel; ?>" class="button"><?php echo $lang_cancel; ?></a>
-      </div>
-    </div>
-    <div class="content">
-        <div class="attention"><?php echo $lang_confirm_change_text; ?>: <strong><?php echo $status_mapped[$this->request->post['change_order_status_id']]; ?></strong></div>
-      <form action="<?php echo $link_complete; ?>" method="post" enctype="multipart/form-data" id="form">
-        <table class="list">
-          <thead>
-            <tr>
-              <td class="center" width="60"><?php echo $column_order_id; ?></td>
-              <td class="left" width="150"><?php echo $column_customer; ?></td>
-              <td class="left" width="125"><?php echo $column_status; ?></td>
-              <td class="left" width="60"><?php echo $lang_order_channel; ?></td>
-                <td class="left"><?php echo $column_date_added; ?></td>
-                <td class="left"><?php echo $lang_column_addtional; ?></td>
-                <td class="left"><?php echo $lang_column_comments; ?></td>
-                <td class="center">
-                    <?php echo $lang_column_notify; ?>&nbsp;
-                    <input type="checkbox" name="notify_all" id="notify_all" value="1" onchange="notifyAll();" />
-                </td>
-            </tr>
-          </thead>
-          <tbody>
-          <input type="hidden" name="order_status_id" value="<?php echo $this->request->post['change_order_status_id']; ?>"/>
-            <?php foreach ($orders as $order) { ?>
-                <input type="hidden" name="order_id[]" value="<?php echo $order['order_id']; ?>"/>
-                <input type="hidden" name="old_status[<?php echo $order['order_id']; ?>]" value="<?php echo $order['order_status_id']; ?>"/>
-                <tr>
-                    <td class="center"><?php echo $order['order_id']; ?></td>
-                    <td class="left"><?php echo $order['customer']; ?></td>
-                    <td class="left"><?php echo $order['status']; ?></td>
-                    <td class="left">
-                        <input type="hidden" name="channel[<?php echo $order['order_id']; ?>]" value="<?php echo $order['channel']; ?>"/>
-                        <?php echo $order['channel']; ?>
-                    </td>
-                    <td class="left"><?php echo $order['date_added']; ?></td>
-                    <td class="left">
-<?php
-                      if($order['channel'] == 'eBay'){
-                        //shipping info
-                        if($this->request->post['change_order_status_id'] == $this->config->get('EBAY_DEF_SHIPPED_ID')){
-?>
-                            <p>
-                                <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_carrier; ?>:</span>
-                                <select name="carrier[<?php echo $order['order_id']; ?>]">
-                                    <?php foreach($market_options['ebay']['carriers'] as $carrier){ ?>
-                                        <option <?php echo ($carrier['description'] == $order['shipping_method'] ? ' selected' : ''); ?>><?php echo $carrier['description']; ?></option>
-                                    <?php } ?>
-                                </select>
-                            </p>
-                            <p><span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_tracking; ?>:</span><input type="text" name="tracking[<?php echo $order['order_id']; ?>]" value="" class="ebay_tracking_no"></p>
-<?php
-                        }
-                      }
-
-                      if($order['channel'] == 'Amazon'){
-                        //shipping info
-                        if($this->request->post['change_order_status_id'] == $this->config->get('openbay_amazon_order_status_shipped')){
-?>
-                        <p>
-                            <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_carrier; ?>:</span>
-                            <select name="carrier[<?php echo $order['order_id']; ?>]" class="amazon_carrier" id="amazon_carrier_<?php echo $order['order_id']; ?>">
-                                <?php foreach($market_options['amazon']['carriers'] as $courier){ ?>
-                                    <option><?php echo $courier; ?></option>
-                                <?php } ?>
-                                <option value="other"><?php echo $lang_other; ?></option>
-                            </select>
-                        </p>
-                        <p>
-                            <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_other; ?>:</span>
-                            <input type="text" name="carrier_other[<?php echo $order['order_id']; ?>]" value="" id="amazon_carrier_<?php echo $order['order_id']; ?>_other">
-                        </p>
-                        <p>
-                            <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_tracking; ?>:</span>
-                            <input type="text" name="tracking[<?php echo $order['order_id']; ?>]" value="">
-                        </p>
-<?php
-                        }
-                      }
-                      
-                      if($order['channel'] == 'Amazonus'){
-                        //shipping info
-                        if($this->request->post['change_order_status_id'] == $this->config->get('openbay_amazonus_order_status_shipped')){
-?>
-                        <p>
-                            <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_carrier; ?>:</span>
-                            <select name="carrier[<?php echo $order['order_id']; ?>]" class="amazonus_carrier" id="amazonus_carrier_<?php echo $order['order_id']; ?>">
-                                <?php foreach($market_options['amazonus']['carriers'] as $courier){ ?>
-                                    <option><?php echo $courier; ?></option>
-                                <?php } ?>
-                                <option value="other"><?php echo $lang_other; ?></option>
-                            </select>
-                        </p>
-                        <p>
-                            <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_other; ?>:</span>
-                            <input type="text" name="carrier_other[<?php echo $order['order_id']; ?>]" value="" id="amazonus_carrier_<?php echo $order['order_id']; ?>_other">
-                        </p>
-                        <p>
-                            <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_tracking; ?>:</span>
-                            <input type="text" name="tracking[<?php echo $order['order_id']; ?>]" value="">
-                        </p>
-<?php
-                        }
-                      }
-                      
-                      
-
-                      if($order['channel'] == 'Play'){
-                        //shipping info
-                        if($this->request->post['change_order_status_id'] == $this->config->get('obp_play_shipped_id')){
-?>
-                        <p>
-                            <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_carrier; ?>:</span>
-                            <select name="carrier[<?php echo $order['order_id']; ?>]">
-                                <?php foreach($market_options['play']['carriers'] as $id => $carrier){ ?>
-                                    <option value="<?php echo $id; ?>"><?php echo $carrier; ?></option>
-                                <?php } ?>
-                            </select>
-                        </p>
-
-                        <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_tracking; ?>:</span>
-                        <input type="text" name="tracking[<?php echo $order['order_id']; ?>]" value="none" class="play_tracking_no">
-
-<?php
-                        }
-
-                        //refund info
-                        if($this->request->post['change_order_status_id'] == $this->config->get('obp_play_refunded_id')){
-?>
-                        <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_refund_reason; ?>:</span>
-                            <select name="refund_reason[<?php echo $order['order_id']; ?>]">
-                                <?php foreach($refund_reason as $id => $reason){ ?>
-                                    <option value="<?php echo $id; ?>" ><?php echo $reason; ?></option>
-                                <?php } ?>
-                            </select>
-
-                        <span style="display:block; width:80px; font-weight:bold;"><?php echo $lang_refund_message; ?>:</span>
-                            <input type="text" name="refund_message[<?php echo $order['order_id']; ?>]" value="" class="play_refund_reason">
-<?php
-                        }
-                      }
-?>
-                    </td>
-                    <td class="left"><textarea name="comments[<?php echo $order['order_id']; ?>]"></textarea></td>
-                    <td class="center">
-                        <input type="hidden" name="notify[<?php echo $order['order_id']; ?>]" value="0"/>
-                        <input type="checkbox" name="notify[<?php echo $order['order_id']; ?>]" class="notify_checkbox" value="1"/>
-                    </td>
-                </tr>
-            <?php } ?>
-          </tbody>
-        </table>
-
-      </form>
-        <div class="buttons right" style="margin-top:20px;">
-            <a onclick="validate();" class="button"><?php echo $lang_update; ?></a>
-        </div>
-    </div>
-  </div>
-</div>
-
-<script>
-    function notifyAll(){
-        var valChecked = $('#notify_all').prop('checked');
-
-        if(valChecked == true){
-            $('.notify_checkbox').prop('checked', true);
-        }else{
-            $('.notify_checkbox').prop('checked', false);
-        }
-    }
-
-    function validate(){
-        var element_id;
-        var error = false;
-        var errorPlayRefund = false;
-        var errorPlayTracking = false;
-        var errorAmazonCarrier = false;
-        var errorAmazonusCarrier = false;
-
-        $.each($('.play_refund_reason'), function(k,v){
-            if($(this).val() == ''){
-                error = true;
-                errorPlayRefund = true;
-                $(this).css('border-color','#FF0000');
-            }
-        });
-
-        $.each($('.play_tracking_no'), function(k,v){
-            if($(this).val() == ''){
-                error = true;
-                errorPlayTracking = true;
-                $(this).css('border-color','#FF0000');
-            }
-        });
-
-        $.each($('.amazon_carrier'), function(k,v){
-            if($(this).val() == 'other'){
-                element_id = $(this).attr("id");
-
-                if($('#'+element_id+'_other').val() == ''){
-                    error = true;
-                    errorAmazonCarrier = true;
-                    $('#'+element_id+'_other').css('border-color','#FF0000');
-                }
-            }
-        });
-        
-        $.each($('.amazonus_carrier'), function(k,v){
-            if($(this).val() == 'other'){
-                element_id = $(this).attr("id");
-
-                if($('#'+element_id+'_other').val() == ''){
-                    error = true;
-                    errorAmazonusCarrier = true;
-                    $('#'+element_id+'_other').css('border-color','#FF0000');
-                }
-            }
-        });
-
-        if(errorPlayRefund == true){
-            alert('<?php echo $lang_e_ajax_1; ?>');
-        }
-
-        if(errorPlayTracking == true){
-            alert('<?php echo $lang_e_ajax_2; ?>');
-        }
-
-        if(errorAmazonCarrier == true){
-            alert('<?php echo $lang_e_ajax_3; ?>');
-        }
-        
-        if(errorAmazonusCarrier == true){
-            alert('<?php echo $lang_e_ajax_3; ?>');
-        }
-
-        if(error == false){
-            $('#form').submit();
-        }else{
-            return false;
-        }
-    }
-</script>
-
-<?php echo $footer; ?>
\ No newline at end of file
diff --git a/admin/view/default/extension/payment.tpl b/admin/view/default/extension/payment.tpl
index a0841b3..2b01d4a 100755
--- a/admin/view/default/extension/payment.tpl
+++ b/admin/view/default/extension/payment.tpl
@@ -29,14 +29,12 @@
             <tr>
               <td class="left">{$langs[$payment['code']]}</td>
               <td class="right">
-                [
                 {if $payment['installed']} 
-                  <a href="/admin/payment/{$payment['code']}">edit</a>
-                  <a href="/admin/extension/payment/uninstall?code={$payment['code']}">uninstall</a>
+                  [<a href="/admin/payment/{$payment['code']}">{$langs['button_edit']}</a>]
+                  [<a href="/admin/extension/payment/uninstall?code={$payment['code']}">{$langs['text_uninstall']}</a>]
                 {else}
-                  <a href="/admin/extension/payment/install?code={$payment['code']}">install</a>
+                  [<a href="/admin/extension/payment/install?code={$payment['code']}">{$langs['text_install']}</a>]
                 {/if}
-                ]
               </td>
             </tr>
             {/foreach}
diff --git a/admin/view/default/extension/shipping.tpl b/admin/view/default/extension/shipping.tpl
index 44535b1..f92334a 100755
--- a/admin/view/default/extension/shipping.tpl
+++ b/admin/view/default/extension/shipping.tpl
@@ -29,14 +29,12 @@
             <tr>
               <td class="left">{$langs[$shipping['code']]}</td>
               <td class="right">
-                [
                 {if $shipping['installed']} 
-                  <a href="/admin/shipping/{$shipping['code']}">edit</a>
-                  <a href="/admin/extension/shipping/uninstall?code={$shipping['code']}">uninstall</a>
+                  [<a href="/admin/shipping/{$shipping['code']}">{$langs['button_edit']}</a>]
+                  [<a href="/admin/extension/shipping/uninstall?code={$shipping['code']}">{$langs['text_uninstall']}</a>]
                 {else}
-                  <a href="/admin/extension/shipping/install?code={$shipping['code']}">install</a>
+                  [<a href="/admin/extension/shipping/install?code={$shipping['code']}">{$langs['text_install']}</a>]
                 {/if}
-                ]
               </td>
             </tr>
             {/foreach}
diff --git a/admin/view/default/extension/total.tpl b/admin/view/default/extension/total.tpl
index 0991fae..de3c144 100755
--- a/admin/view/default/extension/total.tpl
+++ b/admin/view/default/extension/total.tpl
@@ -29,14 +29,12 @@
             <tr>
               <td class="left">{$langs[$total['code']]}</td>
               <td class="right">
-                [
                 {if $total['installed']} 
-                  <a href="/admin/total/{$total['code']}">edit</a>
-                  <a href="/admin/extension/total/uninstall?code={$total['code']}">uninstall</a>
+                  [<a href="/admin/total/{$total['code']}">{$langs['button_edit']}</a>]
+                  [<a href="/admin/extension/total/uninstall?code={$total['code']}">{$langs['text_uninstall']}</a>]
                 {else}
-                  <a href="/admin/extension/total/install?code={$total['code']}">install</a>
+                  [<a href="/admin/extension/total/install?code={$total['code']}">{$langs['text_install']}</a>]
                 {/if}
-                ]
               </td>
             </tr>
             {/foreach}
diff --git a/admin/view/default/product/category_list.tpl b/admin/view/default/product/category_list.tpl
index e6c5611..3ac40ef 100755
--- a/admin/view/default/product/category_list.tpl
+++ b/admin/view/default/product/category_list.tpl
@@ -37,7 +37,8 @@
                   <td class="left">{$category['name']}</td>
                   <td class="right">{$category['sort_order']}</td>
                   <td class="right">
-                    [ <a href="{$action['href']}">{$action['text']}</a> ]
+                    [<a href="/admin/product/category/edit">{$langs['button_edit']}</a>]
+                    [<a href="/admin/product/category/delete">{$langs['button_delete']}</a>]
                   </td>
                 </tr>
               {/foreach}
diff --git a/admin/view/default/product/product_form.tpl b/admin/view/default/product/product_form.tpl
index cd3b659..c95c476 100755
--- a/admin/view/default/product/product_form.tpl
+++ b/admin/view/default/product/product_form.tpl
@@ -1,319 +1,203 @@
-<?php echo $header; ?>
+{$header}
 <div id="content">
   <div class="breadcrumb">
-    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
-    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
-    <?php } ?>
+    {foreach from=$breadcrumbs item=breadcrumb}
+      {$breadcrumb['separator']}<a href="{$breadcrumb['href']}">{$breadcrumb['text']}</a>
+    {/foreach}
   </div>
-  <?php if ($error_warning) { ?>
-  <div class="warning"><?php echo $error_warning; ?></div>
-  <?php } ?>
+  {if $error_warning}
+  <div class="warning">{$error_warning}</div>
+  {/if}
   <div class="box">
     <div class="heading">
-      <h1><img src="view/image/product.png" alt="" /> <?php echo $heading_title; ?></h1>
-      <div class="buttons"><a onclick="$('#form').submit();" class="button"><?php echo $button_save; ?></a><a href="<?php echo $cancel; ?>" class="button"><?php echo $button_cancel; ?></a></div>
+      <h1>
+        <img src="{$smarty.const.IMAGE}product.png" alt="" /> {$heading_title}</h1>
+      <div class="buttons">
+      </div>
     </div>
     <div class="content">
-      <div id="tabs" class="htabs"><a href="#tab-general"><?php echo $tab_general; ?></a><a href="#tab-data"><?php echo $tab_data; ?></a><a href="#tab-links"><?php echo $tab_links; ?></a><a href="#tab-attribute"><?php echo $tab_attribute; ?></a><a href="#tab-option"><?php echo $tab_option; ?></a><a href="#tab-profile"><?php echo $tab_profile; ?></a><a href="#tab-discount"><?php echo $tab_discount; ?></a><a href="#tab-special"><?php echo $tab_special; ?></a><a href="#tab-image"><?php echo $tab_image; ?></a><a href="#tab-reward"><?php echo $tab_reward; ?></a><a href="#tab-design"><?php echo $tab_design; ?></a></div>
-      <form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form">
+      <div id="tabs" class="htabs">
+        <a href="#tab-general">{$tab_general}</a>
+        <a href="#tab-data">{$tab_data}</a>
+        <a href="#tab-links">{$tab_links}</a>
+        <a href="#tab-attribute">{$tab_attribute}</a>
+        <a href="#tab-option">{$tab_option}</a>
+        <a href="#tab-profile">{$tab_profile}</a>
+        <a href="#tab-discount">{$tab_discount}</a>
+        <a href="#tab-special">{$tab_special}</a>
+        <a href="#tab-image">{$tab_image}</a>
+        <a href="#tab-reward">{$tab_reward}</a>
+      </div>
+      <form action="{$action}" method="post" enctype="multipart/form-data" id="form">
         <div id="tab-general">
           <div id="languages" class="htabs">
-            <?php foreach ($languages as $language) { ?>
-            <a href="#language<?php echo $language['language_id']; ?>"><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /> <?php echo $language['name']; ?></a>
-            <?php } ?>
+            {foreach from=$languages item=language}
+              <a href="#language{$language['language_id']}">
+              <img src="view/image/flags/{$language['image']}" title="{$language['name']}" /> {$language['name']}</a>
+            {/foreach}
           </div>
-          <?php foreach ($languages as $language) { ?>
-          <div id="language<?php echo $language['language_id']; ?>">
-            <table class="form">
-              <tr>
-                <td><span class="required">*</span> <?php echo $entry_name; ?></td>
-                <td><input type="text" name="product_description[<?php echo $language['language_id']; ?>][name]" size="100" value="<?php echo isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['name'] : ''; ?>" />
-                  <?php if (isset($error_name[$language['language_id']])) { ?>
-                  <span class="error"><?php echo $error_name[$language['language_id']]; ?></span>
-                  <?php } ?></td>
-              </tr>
-              <tr>
-                <td><?php echo $entry_meta_description; ?></td>
-                <td><textarea name="product_description[<?php echo $language['language_id']; ?>][meta_description]" cols="40" rows="5"><?php echo isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['meta_description'] : ''; ?></textarea></td>
-              </tr>
-              <tr>
-                <td><?php echo $entry_meta_keyword; ?></td>
-                <td><textarea name="product_description[<?php echo $language['language_id']; ?>][meta_keyword]" cols="40" rows="5"><?php echo isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['meta_keyword'] : ''; ?></textarea></td>
-              </tr>
-              <tr>
-                <td><?php echo $entry_description; ?></td>
-                <td><textarea name="product_description[<?php echo $language['language_id']; ?>][description]" id="description<?php echo $language['language_id']; ?>"><?php echo isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['description'] : ''; ?></textarea></td>
-              </tr>
-              <tr>
-                <td><?php echo $entry_tag; ?></td>
-                <td><input type="text" name="product_description[<?php echo $language['language_id']; ?>][tag]" value="<?php echo isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['tag'] : ''; ?>" size="80" /></td>
-              </tr>
-            </table>
-          </div>
-          <?php } ?>
+          {foreach from=$languages item=language}
+            <div id="language{$language['language_id']}">
+              <table class="form">
+                <tr>
+                  <td><span class="required">*</span> {$entry_name}</td>
+                  <td><input type="text" name="product_description[{$language['language_id']}][name]" size="100" value="" />
+                    {if $error_name[$language['language_id']]}
+                    <span class="error">{$error_name[$language['language_id']]}</span>
+                    {/if}</td>
+                </tr>
+                <tr>
+                  <td>{$entry_meta_description}</td>
+                  <td><textarea name="product_description[{$language['language_id']}][meta_description]" cols="40" rows="5"></textarea></td>
+                </tr>
+                <tr>
+                  <td>{$entry_meta_keyword}</td>
+                  <td><textarea name="product_description[{$language['language_id']}][meta_keyword]" cols="40" rows="5"></textarea></td>
+                </tr>
+                <tr>
+                  <td>{$entry_description}</td>
+                  <td><textarea name="product_description[{$language['language_id']}][description]" id="description{$language['language_id']}"></textarea></td>
+                </tr>
+                <tr>
+                  <td>{$entry_tag}</td>
+                  <td><input type="text" name="product_description[{$language['language_id']}][tag]" value="" size="80" /></td>
+                </tr>
+              </table>
+            </div>
+          {/foreach}
         </div>
         <div id="tab-data">
           <table class="form">
             <tr>
-              <td><span class="required">*</span> <?php echo $entry_model; ?></td>
-              <td><input type="text" name="model" value="<?php echo $model; ?>" />
-                <?php if ($error_model) { ?>
-                <span class="error"><?php echo $error_model; ?></span>
-                <?php } ?></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_sku; ?></td>
-              <td><input type="text" name="sku" value="<?php echo $sku; ?>" /></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_upc; ?></td>
-              <td><input type="text" name="upc" value="<?php echo $upc; ?>" /></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_ean; ?></td>
-              <td><input type="text" name="ean" value="<?php echo $ean; ?>" /></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_jan; ?></td>
-              <td><input type="text" name="jan" value="<?php echo $jan; ?>" /></td>
+              <td><span class="required">*</span> {$entry_model}</td>
+              <td><input type="text" name="model" value="{$model}" />
+                {if $error_model}
+                <span class="error">{$error_model}</span>
+                {/if}</td>
             </tr>
             <tr>
-              <td><?php echo $entry_isbn; ?></td>
-              <td><input type="text" name="isbn" value="<?php echo $isbn; ?>" /></td>
+              <td>{$entry_sku}</td>
+              <td><input type="text" name="sku" value="{$sku}" /></td>
             </tr>
             <tr>
-              <td><?php echo $entry_mpn; ?></td>
-              <td><input type="text" name="mpn" value="<?php echo $mpn; ?>" /></td>
+                <td>{$entry_price}</td>
+                <td><input type="text" name="price" value="{$price}" /></td>
             </tr>
             <tr>
-              <td><?php echo $entry_location; ?></td>
-              <td><input type="text" name="location" value="<?php echo $location; ?>" /></td>
-            </tr>
-            <tr>
-                <td><?php echo $entry_price; ?></td>
-                <td><input type="text" name="price" value="<?php echo $price; ?>" /></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_tax_class; ?></td>
+              <td>{$entry_tax_class}</td>
               <td><select name="tax_class_id">
-                  <option value="0"><?php echo $text_none; ?></option>
-                  <?php foreach ($tax_classes as $tax_class) { ?>
-                  <?php if ($tax_class['tax_class_id'] == $tax_class_id) { ?>
-                  <option value="<?php echo $tax_class['tax_class_id']; ?>" selected="selected"><?php echo $tax_class['title']; ?></option>
-                  <?php } else { ?>
-                  <option value="<?php echo $tax_class['tax_class_id']; ?>"><?php echo $tax_class['title']; ?></option>
-                  <?php } ?>
-                  <?php } ?>
+                  <option value="0">{$text_none}</option>
+                  {foreach from=$tax_classes item=tax_class}
+                    {if $tax_class['tax_class_id'] == $tax_class_id}
+                      <option value="{$tax_class['tax_class_id']}" selected="selected">{$tax_class['title']}</option>
+                    {else}
+                      <option value="{$tax_class['tax_class_id']}">{$tax_class['title']}</option>
+                    {/if}
+                  {/foreach}
                 </select></td>
             </tr>
             <tr>
-              <td><?php echo $entry_quantity; ?></td>
-              <td><input type="text" name="quantity" value="<?php echo $quantity; ?>" size="2" /></td>
+              <td>{$entry_quantity}</td>
+              <td><input type="text" name="quantity" value="{$quantity}" size="2" /></td>
             </tr>
             <tr>
-              <td><?php echo $entry_minimum; ?></td>
-              <td><input type="text" name="minimum" value="<?php echo $minimum; ?>" size="2" /></td>
+              <td>{$entry_minimum}</td>
+              <td><input type="text" name="minimum" value="{$minimum}" size="2" /></td>
             </tr>
             <tr>
-              <td><?php echo $entry_subtract; ?></td>
+              <td>{$entry_subtract}</td>
               <td><select name="subtract">
-                  <?php if ($subtract) { ?>
-                  <option value="1" selected="selected"><?php echo $text_yes; ?></option>
-                  <option value="0"><?php echo $text_no; ?></option>
-                  <?php } else { ?>
-                  <option value="1"><?php echo $text_yes; ?></option>
-                  <option value="0" selected="selected"><?php echo $text_no; ?></option>
-                  <?php } ?>
+                  {if $subtract}
+                  <option value="1" selected="selected">{$text_yes}</option>
+                  <option value="0">{$text_no}</option>
+                  {else}
+                  <option value="1">{$text_yes}</option>
+                  <option value="0" selected="selected">{$text_no}</option>
+                  {/if}
                 </select></td>
             </tr>
             <tr>
-              <td><?php echo $entry_stock_status; ?></td>
-              <td><select name="stock_status_id">
-                  <?php foreach ($stock_statuses as $stock_status) { ?>
-                  <?php if ($stock_status['stock_status_id'] == $stock_status_id) { ?>
-                  <option value="<?php echo $stock_status['stock_status_id']; ?>" selected="selected"><?php echo $stock_status['name']; ?></option>
-                  <?php } else { ?>
-                  <option value="<?php echo $stock_status['stock_status_id']; ?>"><?php echo $stock_status['name']; ?></option>
-                  <?php } ?>
-                  <?php } ?>
-                </select></td>
+              <td>{$entry_stock_status}</td>
+              <td>
+                <select name="stock_status_id">
+                  {foreach from=$stock_statuses item=stock_status}
+                    {if $stock_status['stock_status_id'] == $stock_status_id}
+                      <option value="{$stock_status['stock_status_id']}" selected="selected">{$stock_status['name']}</option>
+                    {else}
+                      <option value="{$stock_status['stock_status_id']}">{$stock_status['name']}</option>
+                    {/if}
+                  {/foreach}
+                </select>
+              </td>
             </tr>
             <tr>
-              <td><?php echo $entry_shipping; ?></td>
-              <td><?php if ($shipping) { ?>
+              <td>{$entry_shipping}</td>
+              <td>{if $shipping}
                 <input type="radio" name="shipping" value="1" checked="checked" />
-                <?php echo $text_yes; ?>
+                {$text_yes}
                 <input type="radio" name="shipping" value="0" />
-                <?php echo $text_no; ?>
-                <?php } else { ?>
+                {$text_no}
+                {else}
                 <input type="radio" name="shipping" value="1" />
-                <?php echo $text_yes; ?>
+                {$text_yes}
                 <input type="radio" name="shipping" value="0" checked="checked" />
-                <?php echo $text_no; ?>
-                <?php } ?></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_keyword; ?></td>
-              <td><input type="text" name="keyword" value="<?php echo $keyword; ?>" /></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_image; ?></td>
-              <td><div class="image"><img src="<?php echo $thumb; ?>" alt="" id="thumb" /><br />
-                  <input type="hidden" name="image" value="<?php echo $image; ?>" id="image" />
-                  <a onclick="image_upload('image', 'thumb');"><?php echo $text_browse; ?></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a onclick="$('#thumb').attr('src', '<?php echo $no_image; ?>'); $('#image').attr('value', '');"><?php echo $text_clear; ?></a></div></td>
+                {$text_no}
+                {/if}</td>
             </tr>
             <tr>
-              <td><?php echo $entry_date_available; ?></td>
-              <td><input type="text" name="date_available" value="<?php echo $date_available; ?>" size="12" class="date" /></td>
+              <td>{$entry_keyword}</td>
+              <td><input type="text" name="keyword" value="{$keyword}" /></td>
             </tr>
             <tr>
-              <td><?php echo $entry_dimension; ?></td>
-              <td><input type="text" name="length" value="<?php echo $length; ?>" size="4" />
-                <input type="text" name="width" value="<?php echo $width; ?>" size="4" />
-                <input type="text" name="height" value="<?php echo $height; ?>" size="4" /></td>
+              <td>{$entry_image}</td>
+              <td>
+                <div class="image"><img src="{$thumb}" alt="" id="thumb" /><br />
+                  <input type="hidden" name="image" value="{$image}" id="image" />
+                </div>
+              </td>
             </tr>
             <tr>
-              <td><?php echo $entry_length; ?></td>
-              <td><select name="length_class_id">
-                  <?php foreach ($length_classes as $length_class) { ?>
-                  <?php if ($length_class['length_class_id'] == $length_class_id) { ?>
-                  <option value="<?php echo $length_class['length_class_id']; ?>" selected="selected"><?php echo $length_class['title']; ?></option>
-                  <?php } else { ?>
-                  <option value="<?php echo $length_class['length_class_id']; ?>"><?php echo $length_class['title']; ?></option>
-                  <?php } ?>
-                  <?php } ?>
-                </select></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_weight; ?></td>
-              <td><input type="text" name="weight" value="<?php echo $weight; ?>" /></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_weight_class; ?></td>
-              <td><select name="weight_class_id">
-                  <?php foreach ($weight_classes as $weight_class) { ?>
-                  <?php if ($weight_class['weight_class_id'] == $weight_class_id) { ?>
-                  <option value="<?php echo $weight_class['weight_class_id']; ?>" selected="selected"><?php echo $weight_class['title']; ?></option>
-                  <?php } else { ?>
-                  <option value="<?php echo $weight_class['weight_class_id']; ?>"><?php echo $weight_class['title']; ?></option>
-                  <?php } ?>
-                  <?php } ?>
-                </select></td>
+              <td>{$entry_date_available}</td>
+              <td><input type="text" name="date_available" value="{$date_available}" size="12" class="date" /></td>
             </tr>
             <tr>
-              <td><?php echo $entry_status; ?></td>
+              <td>{$entry_status}</td>
               <td><select name="status">
-                  <?php if ($status) { ?>
-                  <option value="1" selected="selected"><?php echo $text_enabled; ?></option>
-                  <option value="0"><?php echo $text_disabled; ?></option>
-                  <?php } else { ?>
-                  <option value="1"><?php echo $text_enabled; ?></option>
-                  <option value="0" selected="selected"><?php echo $text_disabled; ?></option>
-                  <?php } ?>
+                  {if $status}
+                  <option value="1" selected="selected">{$text_enabled}</option>
+                  <option value="0">{$text_disabled}</option>
+                  {else}
+                  <option value="1">{$text_enabled}</option>
+                  <option value="0" selected="selected">{$text_disabled}</option>
+                  {/if}
                 </select></td>
             </tr>
             <tr>
-              <td><?php echo $entry_sort_order; ?></td>
-              <td><input type="text" name="sort_order" value="<?php echo $sort_order; ?>" size="2" /></td>
+              <td>{$entry_sort_order}</td>
+              <td><input type="text" name="sort_order" value="{$sort_order}" size="2" /></td>
             </tr>
           </table>
         </div>
         <div id="tab-links">
           <table class="form">
             <tr>
-              <td><?php echo $entry_manufacturer; ?></td>
-              <td><input type="text" name="manufacturer" value="<?php echo $manufacturer ?>" /><input type="hidden" name="manufacturer_id" value="<?php echo $manufacturer_id; ?>" /></td>
+              <td>{$entry_manufacturer}</td>
+              <td>
+                <input type="text" name="manufacturer" value="{$manufacturer}" />
+                <input type="hidden" name="manufacturer_id" value="{$manufacturer_id}" />
+              </td>
             </tr>
             <tr>
-              <td><?php echo $entry_category; ?></td>
+              <td>{$entry_category}</td>
               <td><input type="text" name="category" value="" /></td>
             </tr>
             <tr>
               <td>&nbsp;</td>
-              <td><div id="product-category" class="scrollbox">
-                  <?php $class = 'odd'; ?>
-                  <?php foreach ($product_categories as $product_category) { ?>
-                  <?php $class = ($class == 'even' ? 'odd' : 'even'); ?>
-                  <div id="product-category<?php echo $product_category['cid']; ?>" class="<?php echo $class; ?>"><?php echo $product_category['name']; ?><img src="view/image/delete.png" alt="" />
-                    <input type="hidden" name="product_category[]" value="<?php echo $product_category['cid']; ?>" />
-                  </div>
-                  <?php } ?>
-                </div></td>
+              <td></td>
             </tr> 
             <tr>
-              <td><?php echo $entry_filter; ?></td>
-              <td><input type="text" name="filter" value="" /></td>
-            </tr>
-            <tr>
-              <td>&nbsp;</td>
-              <td><div id="product-filter" class="scrollbox">
-                  <?php $class = 'odd'; ?>
-                  <?php foreach ($product_filters as $product_filter) { ?>
-                  <?php $class = ($class == 'even' ? 'odd' : 'even'); ?>
-                  <div id="product-filter<?php echo $product_filter['filter_id']; ?>" class="<?php echo $class; ?>"><?php echo $product_filter['name']; ?><img src="view/image/delete.png" alt="" />
-                    <input type="hidden" name="product_filter[]" value="<?php echo $product_filter['filter_id']; ?>" />
-                  </div>
-                  <?php } ?>
-                </div></td>
-            </tr>                       
-            <tr>
-              <td><?php echo $entry_store; ?></td>
-              <td><div class="scrollbox">
-                  <?php $class = 'even'; ?>
-                  <div class="<?php echo $class; ?>">
-                    <?php if (in_array(0, $product_store)) { ?>
-                    <input type="checkbox" name="product_store[]" value="0" checked="checked" />
-                    <?php echo $text_default; ?>
-                    <?php } else { ?>
-                    <input type="checkbox" name="product_store[]" value="0" />
-                    <?php echo $text_default; ?>
-                    <?php } ?>
-                  </div>
-                  <?php foreach ($stores as $store) { ?>
-                  <?php $class = ($class == 'even' ? 'odd' : 'even'); ?>
-                  <div class="<?php echo $class; ?>">
-                    <?php if (in_array($store['store_id'], $product_store)) { ?>
-                    <input type="checkbox" name="product_store[]" value="<?php echo $store['store_id']; ?>" checked="checked" />
-                    <?php echo $store['name']; ?>
-                    <?php } else { ?>
-                    <input type="checkbox" name="product_store[]" value="<?php echo $store['store_id']; ?>" />
-                    <?php echo $store['name']; ?>
-                    <?php } ?>
-                  </div>
-                  <?php } ?>
-                </div></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_download; ?></td>
-              <td><input type="text" name="download" value="" /></td>
-            </tr>			
-            <tr>
-              <td>&nbsp;</td>
-              <td><div id="product-download" class="scrollbox">
-                  <?php $class = 'odd'; ?>
-                  <?php foreach ($product_downloads as $product_download) { ?>
-                  <?php $class = ($class == 'even' ? 'odd' : 'even'); ?>
-                  <div id="product-download<?php echo $product_download['download_id']; ?>" class="<?php echo $class; ?>"> <?php echo $product_download['name']; ?><img src="view/image/delete.png" alt="" />
-                    <input type="hidden" name="product_download[]" value="<?php echo $product_download['download_id']; ?>" />
-                  </div>
-                  <?php } ?>
-                </div></td>
-            </tr>
-            <tr>
-              <td><?php echo $entry_related; ?></td>
-              <td><input type="text" name="related" value="" /></td>
-            </tr>
-            <tr>
-              <td>&nbsp;</td>
-              <td><div id="product-related" class="scrollbox">
-                  <?php $class = 'odd'; ?>
-                  <?php foreach ($product_related as $product_related) { ?>
-                  <?php $class = ($class == 'even' ? 'odd' : 'even'); ?>
-                  <div id="product-related<?php echo $product_related['item_id']; ?>" class="<?php echo $class; ?>"> <?php echo $product_related['name']; ?><img src="view/image/delete.png" alt="" />
-                    <input type="hidden" name="product_related[]" value="<?php echo $product_related['item_id']; ?>" />
-                  </div>
-                  <?php } ?>
-                </div></td>
+              <td>{$entry_store}</td>
+              <td></td>
             </tr>
           </table>
         </div>
@@ -321,438 +205,36 @@
           <table id="attribute" class="list">
             <thead>
               <tr>
-                <td class="left"><?php echo $entry_attribute; ?></td>
-                <td class="left"><?php echo $entry_text; ?></td>
+                <td class="left">{$entry_attribute}</td>
+                <td class="left">{$entry_text}</td>
                 <td></td>
               </tr>
             </thead>
-            <?php $attribute_row = 0; ?>
-            <?php foreach ($product_attributes as $product_attribute) { ?>
-            <tbody id="attribute-row<?php echo $attribute_row; ?>">
+            {foreach from=$product_attributes item=product_attribute}
+            <tbody id="attribute-row{$attribute_row}">
               <tr>
-                <td class="left"><input type="text" name="product_attribute[<?php echo $attribute_row; ?>][name]" value="<?php echo $product_attribute['name']; ?>" />
-                  <input type="hidden" name="product_attribute[<?php echo $attribute_row; ?>][attribute_id]" value="<?php echo $product_attribute['attribute_id']; ?>" /></td>
-                <td class="left"><?php foreach ($languages as $language) { ?>
-                  <textarea name="product_attribute[<?php echo $attribute_row; ?>][product_attribute_description][<?php echo $language['language_id']; ?>][text]" cols="40" rows="5"><?php echo isset($product_attribute['product_attribute_description'][$language['language_id']]) ? $product_attribute['product_attribute_description'][$language['language_id']]['text'] : ''; ?></textarea>
-                  <img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" align="top" /><br />
-                  <?php } ?></td>
-                <td class="left"><a onclick="$('#attribute-row<?php echo $attribute_row; ?>').remove();" class="button"><?php echo $button_remove; ?></a></td>
+                <td class="left"><input type="text" name="product_attribute[{$attribute_row}][name]" value="{$product_attribute['name']}" />
+                  <input type="hidden" name="product_attribute[{$attribute_row}][attribute_id]" value="{$product_attribute['attribute_id']}" /></td>
+                <td class="left">
+                  {foreach from=$languages item=language}
+                  <textarea name="product_attribute[{$attribute_row}][product_attribute_description][{$language['language_id']}][text]" cols="40" rows="5"></textarea>
+                  <img src="view/image/flags/{$language['image']}" title="{$language['name']}" align="top" /><br />
+                  {/foreach}
+                </td>
+                <td class="left">
+                  <a></a>
+                </td>
               </tr>
             </tbody>
-            <?php $attribute_row++; ?>
-            <?php } ?>
+            {/foreach}
             <tfoot>
               <tr>
                 <td colspan="2"></td>
-                <td class="left"><a onclick="addAttribute();" class="button"><?php echo $button_add_attribute; ?></a></td>
+                <td class="left"><a></a></td>
               </tr>
             </tfoot>
           </table>
         </div>
-        <div id="tab-option">
-          <div id="vtab-option" class="vtabs">
-            <?php $option_row = 0; ?>
-            <?php foreach ($product_options as $product_option) { ?>
-            <a href="#tab-option-<?php echo $option_row; ?>" id="option-<?php echo $option_row; ?>"><?php echo $product_option['name']; ?>&nbsp;<img src="view/image/delete.png" alt="" onclick="$('#option-<?php echo $option_row; ?>').remove(); $('#tab-option-<?php echo $option_row; ?>').remove(); $('#vtabs a:first').trigger('click'); return false;" /></a>
-            <?php $option_row++; ?>
-            <?php } ?>
-            <span id="option-add">
-            <input name="option" value="" style="width: 130px;" />
-            &nbsp;<img src="view/image/add.png" alt="<?php echo $button_add_option; ?>" title="<?php echo $button_add_option; ?>" /></span></div>
-          <?php $option_row = 0; ?>
-          <?php $option_value_row = 0; ?>
-          <?php foreach ($product_options as $product_option) { ?>
-          <div id="tab-option-<?php echo $option_row; ?>" class="vtabs-content">
-            <input type="hidden" name="product_option[<?php echo $option_row; ?>][product_option_id]" value="<?php echo $product_option['product_option_id']; ?>" />
-            <input type="hidden" name="product_option[<?php echo $option_row; ?>][name]" value="<?php echo $product_option['name']; ?>" />
-            <input type="hidden" name="product_option[<?php echo $option_row; ?>][option_id]" value="<?php echo $product_option['option_id']; ?>" />
-            <input type="hidden" name="product_option[<?php echo $option_row; ?>][type]" value="<?php echo $product_option['type']; ?>" />
-            <table class="form">
-              <tr>
-                <td><?php echo $entry_required; ?></td>
-                <td><select name="product_option[<?php echo $option_row; ?>][required]">
-                    <?php if ($product_option['required']) { ?>
-                    <option value="1" selected="selected"><?php echo $text_yes; ?></option>
-                    <option value="0"><?php echo $text_no; ?></option>
-                    <?php } else { ?>
-                    <option value="1"><?php echo $text_yes; ?></option>
-                    <option value="0" selected="selected"><?php echo $text_no; ?></option>
-                    <?php } ?>
-                  </select></td>
-              </tr>
-              <?php if ($product_option['type'] == 'text') { ?>
-              <tr>
-                <td><?php echo $entry_option_value; ?></td>
-                <td><input type="text" name="product_option[<?php echo $option_row; ?>][option_value]" value="<?php echo $product_option['option_value']; ?>" /></td>
-              </tr>
-              <?php } ?>
-              <?php if ($product_option['type'] == 'textarea') { ?>
-              <tr>
-                <td><?php echo $entry_option_value; ?></td>
-                <td><textarea name="product_option[<?php echo $option_row; ?>][option_value]" cols="40" rows="5"><?php echo $product_option['option_value']; ?></textarea></td>
-              </tr>
-              <?php } ?>
-              <?php if ($product_option['type'] == 'file') { ?>
-              <tr style="display: none;">
-                <td><?php echo $entry_option_value; ?></td>
-                <td><input type="text" name="product_option[<?php echo $option_row; ?>][option_value]" value="<?php echo $product_option['option_value']; ?>" /></td>
-              </tr>
-              <?php } ?>
-              <?php if ($product_option['type'] == 'date') { ?>
-              <tr>
-                <td><?php echo $entry_option_value; ?></td>
-                <td><input type="text" name="product_option[<?php echo $option_row; ?>][option_value]" value="<?php echo $product_option['option_value']; ?>" class="date" /></td>
-              </tr>
-              <?php } ?>
-              <?php if ($product_option['type'] == 'datetime') { ?>
-              <tr>
-                <td><?php echo $entry_option_value; ?></td>
-                <td><input type="text" name="product_option[<?php echo $option_row; ?>][option_value]" value="<?php echo $product_option['option_value']; ?>" class="datetime" /></td>
-              </tr>
-              <?php } ?>
-              <?php if ($product_option['type'] == 'time') { ?>
-              <tr>
-                <td><?php echo $entry_option_value; ?></td>
-                <td><input type="text" name="product_option[<?php echo $option_row; ?>][option_value]" value="<?php echo $product_option['option_value']; ?>" class="time" /></td>
-              </tr>
-              <?php } ?>
-            </table>
-            <?php if ($product_option['type'] == 'select' || $product_option['type'] == 'radio' || $product_option['type'] == 'checkbox' || $product_option['type'] == 'image') { ?>
-            <table id="option-value<?php echo $option_row; ?>" class="list">
-              <thead>
-                <tr>
-                  <td class="left"><?php echo $entry_option_value; ?></td>
-                  <td class="right"><?php echo $entry_quantity; ?></td>
-                  <td class="left"><?php echo $entry_subtract; ?></td>
-                  <td class="right"><?php echo $entry_price; ?></td>
-                  <td class="right"><?php echo $entry_option_points; ?></td>
-                  <td class="right"><?php echo $entry_weight; ?></td>
-                  <td></td>
-                </tr>
-              </thead>
-              <?php foreach ($product_option['product_option_value'] as $product_option_value) { ?>
-              <tbody id="option-value-row<?php echo $option_value_row; ?>">
-                <tr>
-                  <td class="left"><select name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][option_value_id]">
-                      <?php if (isset($option_values[$product_option['option_id']])) { ?>
-                      <?php foreach ($option_values[$product_option['option_id']] as $option_value) { ?>
-                      <?php if ($option_value['option_value_id'] == $product_option_value['option_value_id']) { ?>
-                      <option value="<?php echo $option_value['option_value_id']; ?>" selected="selected"><?php echo $option_value['name']; ?></option>
-                      <?php } else { ?>
-                      <option value="<?php echo $option_value['option_value_id']; ?>"><?php echo $option_value['name']; ?></option>
-                      <?php } ?>
-                      <?php } ?>
-                      <?php } ?>
-                    </select>
-                    <input type="hidden" name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][product_option_value_id]" value="<?php echo $product_option_value['product_option_value_id']; ?>" /></td>
-                  <td class="right"><input type="text" name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][quantity]" value="<?php echo $product_option_value['quantity']; ?>" size="3" /></td>
-                  <td class="left"><select name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][subtract]">
-                      <?php if ($product_option_value['subtract']) { ?>
-                      <option value="1" selected="selected"><?php echo $text_yes; ?></option>
-                      <option value="0"><?php echo $text_no; ?></option>
-                      <?php } else { ?>
-                      <option value="1"><?php echo $text_yes; ?></option>
-                      <option value="0" selected="selected"><?php echo $text_no; ?></option>
-                      <?php } ?>
-                    </select></td>
-                  <td class="right"><select name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][price_prefix]">
-                      <?php if ($product_option_value['price_prefix'] == '+') { ?>
-                      <option value="+" selected="selected">+</option>
-                      <?php } else { ?>
-                      <option value="+">+</option>
-                      <?php } ?>
-                      <?php if ($product_option_value['price_prefix'] == '-') { ?>
-                      <option value="-" selected="selected">-</option>
-                      <?php } else { ?>
-                      <option value="-">-</option>
-                      <?php } ?>
-                    </select>
-                    <input type="text" name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][price]" value="<?php echo $product_option_value['price']; ?>" size="5" /></td>
-                  <td class="right"><select name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][points_prefix]">
-                      <?php if ($product_option_value['points_prefix'] == '+') { ?>
-                      <option value="+" selected="selected">+</option>
-                      <?php } else { ?>
-                      <option value="+">+</option>
-                      <?php } ?>
-                      <?php if ($product_option_value['points_prefix'] == '-') { ?>
-                      <option value="-" selected="selected">-</option>
-                      <?php } else { ?>
-                      <option value="-">-</option>
-                      <?php } ?>
-                    </select>
-                    <input type="text" name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][points]" value="<?php echo $product_option_value['points']; ?>" size="5" /></td>
-                  <td class="right"><select name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][weight_prefix]">
-                      <?php if ($product_option_value['weight_prefix'] == '+') { ?>
-                      <option value="+" selected="selected">+</option>
-                      <?php } else { ?>
-                      <option value="+">+</option>
-                      <?php } ?>
-                      <?php if ($product_option_value['weight_prefix'] == '-') { ?>
-                      <option value="-" selected="selected">-</option>
-                      <?php } else { ?>
-                      <option value="-">-</option>
-                      <?php } ?>
-                    </select>
-                    <input type="text" name="product_option[<?php echo $option_row; ?>][product_option_value][<?php echo $option_value_row; ?>][weight]" value="<?php echo $product_option_value['weight']; ?>" size="5" /></td>
-                  <td class="left"><a onclick="$('#option-value-row<?php echo $option_value_row; ?>').remove();" class="button"><?php echo $button_remove; ?></a></td>
-                </tr>
-              </tbody>
-              <?php $option_value_row++; ?>
-              <?php } ?>
-              <tfoot>
-                <tr>
-                  <td colspan="6"></td>
-                  <td class="left"><a onclick="addOptionValue('<?php echo $option_row; ?>');" class="button"><?php echo $button_add_option_value; ?></a></td>
-                </tr>
-              </tfoot>
-            </table>
-            <select id="option-values<?php echo $option_row; ?>" style="display: none;">
-              <?php if (isset($option_values[$product_option['option_id']])) { ?>
-              <?php foreach ($option_values[$product_option['option_id']] as $option_value) { ?>
-              <option value="<?php echo $option_value['option_value_id']; ?>"><?php echo $option_value['name']; ?></option>
-              <?php } ?>
-              <?php } ?>
-            </select>
-            <?php } ?>
-          </div>
-          <?php $option_row++; ?>
-          <?php } ?>
-        </div>
-        <div id="tab-profile">
-            <table class="list">
-                <thead>
-                    <tr>
-                        <td class="left"><?php echo $entry_profile ?></td>
-                        <td class="left"><?php echo $entry_customer_group ?></td>
-                        <td class="left"></td>
-                    </tr>
-                </thead>
-                <tbody>
-                    <?php $profileCount = 0; ?>
-                    <?php foreach ($product_profiles as $product_profile): ?>
-                        <?php $profileCount++ ?>
-                    
-                        <tr id="profile-row<?php echo $profileCount ?>">
-                            <td class="left">
-                                <select name="product_profiles[<?php echo $profileCount ?>][profile_id]">
-                                    <?php foreach ($profiles as $profile): ?>
-                                        <?php if ($profile['profile_id'] == $product_profile['profile_id']): ?>
-                                            <option value="<?php echo $profile['profile_id'] ?>" selected="selected"><?php echo $profile['name'] ?></option>
-                                        <?php else: ?>
-                                            <option value="<?php echo $profile['profile_id'] ?>"><?php echo $profile['name'] ?></option>
-                                        <?php endif; ?>
-                                    <?php endforeach; ?>
-                                </select>
-                            </td>
-                            <td class="left">
-                                <select name="product_profiles[<?php echo $profileCount ?>][customer_group_id]">
-                                    <?php foreach ($customer_groups as $customer_group): ?>
-                                        <?php if ($customer_group['customer_group_id'] == $product_profile['customer_group_id']): ?>
-                                            <option value="<?php echo $customer_group['customer_group_id'] ?>" selected="selected"><?php echo $customer_group['name'] ?></option>
-                                        <?php else: ?>
-                                            <option value="<?php echo $customer_group['customer_group_id'] ?>"><?php echo $customer_group['name'] ?></option>
-                                        <?php endif; ?>
-                                    <?php endforeach; ?>
-                                </select>
-                            </td>
-                            <td class="left">
-                                <a class="button" onclick="$('#profile-row<?php echo $profileCount ?>').remove()"><?php echo $button_remove ?></a>
-                            </td>
-                        </tr>
-                    
-                    <?php endforeach; ?>
-                </tbody>
-                <tfoot>
-                    <tr>
-                        <td colspan="2"></td>
-                        <td class="left"><a onclick="addProfile()" class="button"><?php echo $button_add_profile ?></a></td>
-                    </tr>
-                </tfoot>
-            </table>
-        </div>
-        <div id="tab-discount">
-          <table id="discount" class="list">
-            <thead>
-              <tr>
-                <td class="left"><?php echo $entry_customer_group; ?></td>
-                <td class="right"><?php echo $entry_quantity; ?></td>
-                <td class="right"><?php echo $entry_priority; ?></td>
-                <td class="right"><?php echo $entry_price; ?></td>
-                <td class="left"><?php echo $entry_date_start; ?></td>
-                <td class="left"><?php echo $entry_date_end; ?></td>
-                <td></td>
-              </tr>
-            </thead>
-            <?php $discount_row = 0; ?>
-            <?php foreach ($product_discounts as $product_discount) { ?>
-            <tbody id="discount-row<?php echo $discount_row; ?>">
-              <tr>
-                <td class="left"><select name="product_discount[<?php echo $discount_row; ?>][customer_group_id]">
-                    <?php foreach ($customer_groups as $customer_group) { ?>
-                    <?php if ($customer_group['customer_group_id'] == $product_discount['customer_group_id']) { ?>
-                    <option value="<?php echo $customer_group['customer_group_id']; ?>" selected="selected"><?php echo $customer_group['name']; ?></option>
-                    <?php } else { ?>
-                    <option value="<?php echo $customer_group['customer_group_id']; ?>"><?php echo $customer_group['name']; ?></option>
-                    <?php } ?>
-                    <?php } ?>
-                  </select></td>
-                <td class="right"><input type="text" name="product_discount[<?php echo $discount_row; ?>][quantity]" value="<?php echo $product_discount['quantity']; ?>" size="2" /></td>
-                <td class="right"><input type="text" name="product_discount[<?php echo $discount_row; ?>][priority]" value="<?php echo $product_discount['priority']; ?>" size="2" /></td>
-                <td class="right"><input type="text" name="product_discount[<?php echo $discount_row; ?>][price]" value="<?php echo $product_discount['price']; ?>" /></td>
-                <td class="left"><input type="text" name="product_discount[<?php echo $discount_row; ?>][date_start]" value="<?php echo $product_discount['date_start']; ?>" class="date" /></td>
-                <td class="left"><input type="text" name="product_discount[<?php echo $discount_row; ?>][date_end]" value="<?php echo $product_discount['date_end']; ?>" class="date" /></td>
-                <td class="left"><a onclick="$('#discount-row<?php echo $discount_row; ?>').remove();" class="button"><?php echo $button_remove; ?></a></td>
-              </tr>
-            </tbody>
-            <?php $discount_row++; ?>
-            <?php } ?>
-            <tfoot>
-              <tr>
-                <td colspan="6"></td>
-                <td class="left"><a onclick="addDiscount();" class="button"><?php echo $button_add_discount; ?></a></td>
-              </tr>
-            </tfoot>
-          </table>
-        </div>
-        <div id="tab-special">
-          <table id="special" class="list">
-            <thead>
-              <tr>
-                <td class="left"><?php echo $entry_customer_group; ?></td>
-                <td class="right"><?php echo $entry_priority; ?></td>
-                <td class="right"><?php echo $entry_price; ?></td>
-                <td class="left"><?php echo $entry_date_start; ?></td>
-                <td class="left"><?php echo $entry_date_end; ?></td>
-                <td></td>
-              </tr>
-            </thead>
-            <?php $special_row = 0; ?>
-            <?php foreach ($product_specials as $product_special) { ?>
-            <tbody id="special-row<?php echo $special_row; ?>">
-              <tr>
-                <td class="left"><select name="product_special[<?php echo $special_row; ?>][customer_group_id]">
-                    <?php foreach ($customer_groups as $customer_group) { ?>
-                    <?php if ($customer_group['customer_group_id'] == $product_special['customer_group_id']) { ?>
-                    <option value="<?php echo $customer_group['customer_group_id']; ?>" selected="selected"><?php echo $customer_group['name']; ?></option>
-                    <?php } else { ?>
-                    <option value="<?php echo $customer_group['customer_group_id']; ?>"><?php echo $customer_group['name']; ?></option>
-                    <?php } ?>
-                    <?php } ?>
-                  </select></td>
-                <td class="right"><input type="text" name="product_special[<?php echo $special_row; ?>][priority]" value="<?php echo $product_special['priority']; ?>" size="2" /></td>
-                <td class="right"><input type="text" name="product_special[<?php echo $special_row; ?>][price]" value="<?php echo $product_special['price']; ?>" /></td>
-                <td class="left"><input type="text" name="product_special[<?php echo $special_row; ?>][date_start]" value="<?php echo $product_special['date_start']; ?>" class="date" /></td>
-                <td class="left"><input type="text" name="product_special[<?php echo $special_row; ?>][date_end]" value="<?php echo $product_special['date_end']; ?>" class="date" /></td>
-                <td class="left"><a onclick="$('#special-row<?php echo $special_row; ?>').remove();" class="button"><?php echo $button_remove; ?></a></td>
-              </tr>
-            </tbody>
-            <?php $special_row++; ?>
-            <?php } ?>
-            <tfoot>
-              <tr>
-                <td colspan="5"></td>
-                <td class="left"><a onclick="addSpecial();" class="button"><?php echo $button_add_special; ?></a></td>
-              </tr>
-            </tfoot>
-          </table>
-        </div>
-        <div id="tab-image">
-          <table id="images" class="list">
-            <thead>
-              <tr>
-                <td class="left"><?php echo $entry_image; ?></td>
-                <td class="right"><?php echo $entry_sort_order; ?></td>
-                <td></td>
-              </tr>
-            </thead>
-            <?php $image_row = 0; ?>
-            <?php foreach ($product_images as $product_image) { ?>
-            <tbody id="image-row<?php echo $image_row; ?>">
-              <tr>
-                <td class="left"><div class="image"><img src="<?php echo $product_image['thumb']; ?>" alt="" id="thumb<?php echo $image_row; ?>" />
-                    <input type="hidden" name="product_image[<?php echo $image_row; ?>][image]" value="<?php echo $product_image['image']; ?>" id="image<?php echo $image_row; ?>" />
-                    <br />
-                    <a onclick="image_upload('image<?php echo $image_row; ?>', 'thumb<?php echo $image_row; ?>');"><?php echo $text_browse; ?></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a onclick="$('#thumb<?php echo $image_row; ?>').attr('src', '<?php echo $no_image; ?>'); $('#image<?php echo $image_row; ?>').attr('value', '');"><?php echo $text_clear; ?></a></div></td>
-                <td class="right"><input type="text" name="product_image[<?php echo $image_row; ?>][sort_order]" value="<?php echo $product_image['sort_order']; ?>" size="2" /></td>
-                <td class="left"><a onclick="$('#image-row<?php echo $image_row; ?>').remove();" class="button"><?php echo $button_remove; ?></a></td>
-              </tr>
-            </tbody>
-            <?php $image_row++; ?>
-            <?php } ?>
-            <tfoot>
-              <tr>
-                <td colspan="2"></td>
-                <td class="left"><a onclick="addImage();" class="button"><?php echo $button_add_image; ?></a></td>
-              </tr>
-            </tfoot>
-          </table>
-        </div>
-        <div id="tab-reward">
-          <table class="form">
-            <tr>
-              <td><?php echo $entry_points; ?></td>
-              <td><input type="text" name="points" value="<?php echo $points; ?>" /></td>
-            </tr>
-          </table>
-          <table class="list">
-            <thead>
-              <tr>
-                <td class="left"><?php echo $entry_customer_group; ?></td>
-                <td class="right"><?php echo $entry_reward; ?></td>
-              </tr>
-            </thead>
-            <?php foreach ($customer_groups as $customer_group) { ?>
-            <tbody>
-              <tr>
-                <td class="left"><?php echo $customer_group['name']; ?></td>
-                <td class="right"><input type="text" name="product_reward[<?php echo $customer_group['customer_group_id']; ?>][points]" value="<?php echo isset($product_reward[$customer_group['customer_group_id']]) ? $product_reward[$customer_group['customer_group_id']]['points'] : ''; ?>" /></td>
-              </tr>
-            </tbody>
-            <?php } ?>
-          </table>
-        </div>
-        <div id="tab-design">
-          <table class="list">
-            <thead>
-              <tr>
-                <td class="left"><?php echo $entry_store; ?></td>
-                <td class="left"><?php echo $entry_layout; ?></td>
-              </tr>
-            </thead>
-            <tbody>
-              <tr>
-                <td class="left"><?php echo $text_default; ?></td>
-                <td class="left"><select name="product_layout[0][layout_id]">
-                    <option value=""></option>
-                    <?php foreach ($layouts as $layout) { ?>
-                    <?php if (isset($product_layout[0]) && $product_layout[0] == $layout['layout_id']) { ?>
-                    <option value="<?php echo $layout['layout_id']; ?>" selected="selected"><?php echo $layout['name']; ?></option>
-                    <?php } else { ?>
-                    <option value="<?php echo $layout['layout_id']; ?>"><?php echo $layout['name']; ?></option>
-                    <?php } ?>
-                    <?php } ?>
-                  </select></td>
-              </tr>
-            </tbody>
-            <?php foreach ($stores as $store) { ?>
-            <tbody>
-              <tr>
-                <td class="left"><?php echo $store['name']; ?></td>
-                <td class="left"><select name="product_layout[<?php echo $store['store_id']; ?>][layout_id]">
-                    <option value=""></option>
-                    <?php foreach ($layouts as $layout) { ?>
-                    <?php if (isset($product_layout[$store['store_id']]) && $product_layout[$store['store_id']] == $layout['layout_id']) { ?>
-                    <option value="<?php echo $layout['layout_id']; ?>" selected="selected"><?php echo $layout['name']; ?></option>
-                    <?php } else { ?>
-                    <option value="<?php echo $layout['layout_id']; ?>"><?php echo $layout['name']; ?></option>
-                    <?php } ?>
-                    <?php } ?>
-                  </select></td>
-              </tr>
-            </tbody>
-            <?php } ?>
-          </table>
-        </div>
       </form>
     </div>
   </div>
@@ -760,15 +242,15 @@
 <script type="text/javascript" src="view/javascript/ckeditor/ckeditor.js"></script> 
 <script type="text/javascript"><!--
 <?php foreach ($languages as $language) { ?>
-CKEDITOR.replace('description<?php echo $language['language_id']; ?>', {
-	filebrowserBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
-	filebrowserImageBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
-	filebrowserFlashBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
-	filebrowserUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
-	filebrowserImageUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
-	filebrowserFlashUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>'
+CKEDITOR.replace('description{$language['language_id']}', {
+	filebrowserBrowseUrl: 'index.php?route=common/filemanager&token={$token}',
+	filebrowserImageBrowseUrl: 'index.php?route=common/filemanager&token={$token}',
+	filebrowserFlashBrowseUrl: 'index.php?route=common/filemanager&token={$token}',
+	filebrowserUploadUrl: 'index.php?route=common/filemanager&token={$token}',
+	filebrowserImageUploadUrl: 'index.php?route=common/filemanager&token={$token}',
+	filebrowserFlashUploadUrl: 'index.php?route=common/filemanager&token={$token}'
 });
-<?php } ?>
+{/if}
 //--></script> 
 <script type="text/javascript"><!--
 $.widget('custom.catcomplete', $.ui.autocomplete, {
@@ -792,7 +274,7 @@ $('input[name=\'manufacturer\']').autocomplete({
 	delay: 500,
 	source: function(request, response) {
 		$.ajax({
-			url: 'index.php?route=catalog/manufacturer/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
+			url: 'index.php?route=catalog/manufacturer/autocomplete&token={$token}&filter_name=' +  encodeURIComponent(request.term),
 			dataType: 'json',
 			success: function(json) {		
 				response($.map(json, function(item) {
@@ -820,7 +302,7 @@ $('input[name=\'category\']').autocomplete({
 	delay: 500,
 	source: function(request, response) {
 		$.ajax({
-			url: 'index.php?route=catalog/category/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
+			url: 'index.php?route=catalog/category/autocomplete&token={$token}&filter_name=' +  encodeURIComponent(request.term),
 			dataType: 'json',
 			success: function(json) {		
 				response($.map(json, function(item) {
@@ -859,7 +341,7 @@ $('input[name=\'filter\']').autocomplete({
 	delay: 500,
 	source: function(request, response) {
 		$.ajax({
-			url: 'index.php?route=catalog/filter/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
+			url: 'index.php?route=catalog/filter/autocomplete&token={$token}&filter_name=' +  encodeURIComponent(request.term),
 			dataType: 'json',
 			success: function(json) {		
 				response($.map(json, function(item) {
@@ -898,7 +380,7 @@ $('input[name=\'download\']').autocomplete({
 	delay: 500,
 	source: function(request, response) {
 		$.ajax({
-			url: 'index.php?route=catalog/download/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
+			url: 'index.php?route=catalog/download/autocomplete&token={$token}&filter_name=' +  encodeURIComponent(request.term),
 			dataType: 'json',
 			success: function(json) {		
 				response($.map(json, function(item) {
@@ -937,7 +419,7 @@ $('input[name=\'related\']').autocomplete({
 	delay: 500,
 	source: function(request, response) {
 		$.ajax({
-			url: 'index.php?route=catalog/product/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
+			url: 'index.php?route=catalog/product/autocomplete&token={$token}&filter_name=' +  encodeURIComponent(request.term),
 			dataType: 'json',
 			success: function(json) {		
 				response($.map(json, function(item) {
@@ -972,7 +454,7 @@ $('#product-related div img').live('click', function() {
 });
 //--></script> 
 <script type="text/javascript"><!--
-var attribute_row = <?php echo $attribute_row; ?>;
+var attribute_row = {$attribute_row};
 
 function addAttribute() {
 	html  = '<tbody id="attribute-row' + attribute_row + '">';
@@ -980,10 +462,10 @@ function addAttribute() {
 	html += '    <td class="left"><input type="text" name="product_attribute[' + attribute_row + '][name]" value="" /><input type="hidden" name="product_attribute[' + attribute_row + '][attribute_id]" value="" /></td>';
 	html += '    <td class="left">';
 	<?php foreach ($languages as $language) { ?>
-	html += '<textarea name="product_attribute[' + attribute_row + '][product_attribute_description][<?php echo $language['language_id']; ?>][text]" cols="40" rows="5"></textarea><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" align="top" /><br />';
-    <?php } ?>
+	html += '<textarea name="product_attribute[' + attribute_row + '][product_attribute_description][{$language['language_id']}][text]" cols="40" rows="5"></textarea><img src="view/image/flags/{$language['image']}" title="{$language['name']}" align="top" /><br />';
+    {/if}
 	html += '    </td>';
-	html += '    <td class="left"><a onclick="$(\'#attribute-row' + attribute_row + '\').remove();" class="button"><?php echo $button_remove; ?></a></td>';
+	html += '    <td class="left"><a onclick="$(\'#attribute-row' + attribute_row + '\').remove()}</a></td>';
     html += '  </tr>';	
     html += '</tbody>';
 	
@@ -999,7 +481,7 @@ function attributeautocomplete(attribute_row) {
 		delay: 500,
 		source: function(request, response) {
 			$.ajax({
-				url: 'index.php?route=catalog/attribute/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
+				url: 'index.php?route=catalog/attribute/autocomplete&token={$token}&filter_name=' +  encodeURIComponent(request.term),
 				dataType: 'json',
 				success: function(json) {	
 					response($.map(json, function(item) {
@@ -1029,13 +511,13 @@ $('#attribute tbody').each(function(index, element) {
 });
 //--></script> 
 <script type="text/javascript"><!--	
-var option_row = <?php echo $option_row; ?>;
+var option_row = {$option_row};
 
 $('input[name=\'option\']').catcomplete({
 	delay: 500,
 	source: function(request, response) {
 		$.ajax({
-			url: 'index.php?route=catalog/option/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request.term),
+			url: 'index.php?route=catalog/option/autocomplete&token={$token}&filter_name=' +  encodeURIComponent(request.term),
 			dataType: 'json',
 			success: function(json) {
 				response($.map(json, function(item) {
@@ -1058,51 +540,51 @@ $('input[name=\'option\']').catcomplete({
 		html += '	<input type="hidden" name="product_option[' + option_row + '][type]" value="' + ui.item.type + '" />';
 		html += '	<table class="form">';
 		html += '	  <tr>';
-		html += '		<td><?php echo $entry_required; ?></td>';
+		html += '		<td>{$entry_required}</td>';
 		html += '       <td><select name="product_option[' + option_row + '][required]">';
-		html += '	      <option value="1"><?php echo $text_yes; ?></option>';
-		html += '	      <option value="0"><?php echo $text_no; ?></option>';
+		html += '	      <option value="1">{$text_yes}</option>';
+		html += '	      <option value="0">{$text_no}</option>';
 		html += '	    </select></td>';
 		html += '     </tr>';
 		
 		if (ui.item.type == 'text') {
 			html += '     <tr>';
-			html += '       <td><?php echo $entry_option_value; ?></td>';
+			html += '       <td>{$entry_option_value}</td>';
 			html += '       <td><input type="text" name="product_option[' + option_row + '][option_value]" value="" /></td>';
 			html += '     </tr>';
 		}
 		
 		if (ui.item.type == 'textarea') {
 			html += '     <tr>';
-			html += '       <td><?php echo $entry_option_value; ?></td>';
+			html += '       <td>{$entry_option_value}</td>';
 			html += '       <td><textarea name="product_option[' + option_row + '][option_value]" cols="40" rows="5"></textarea></td>';
 			html += '     </tr>';						
 		}
 		 
 		if (ui.item.type == 'file') {
 			html += '     <tr style="display: none;">';
-			html += '       <td><?php echo $entry_option_value; ?></td>';
+			html += '       <td>{$entry_option_value}</td>';
 			html += '       <td><input type="text" name="product_option[' + option_row + '][option_value]" value="" /></td>';
 			html += '     </tr>';			
 		}
 						
 		if (ui.item.type == 'date') {
 			html += '     <tr>';
-			html += '       <td><?php echo $entry_option_value; ?></td>';
+			html += '       <td>{$entry_option_value}</td>';
 			html += '       <td><input type="text" name="product_option[' + option_row + '][option_value]" value="" class="date" /></td>';
 			html += '     </tr>';			
 		}
 		
 		if (ui.item.type == 'datetime') {
 			html += '     <tr>';
-			html += '       <td><?php echo $entry_option_value; ?></td>';
+			html += '       <td>{$entry_option_value}</td>';
 			html += '       <td><input type="text" name="product_option[' + option_row + '][option_value]" value="" class="datetime" /></td>';
 			html += '     </tr>';			
 		}
 		
 		if (ui.item.type == 'time') {
 			html += '     <tr>';
-			html += '       <td><?php echo $entry_option_value; ?></td>';
+			html += '       <td>{$entry_option_value}</td>';
 			html += '       <td><input type="text" name="product_option[' + option_row + '][option_value]" value="" class="time" /></td>';
 			html += '     </tr>';			
 		}
@@ -1113,19 +595,19 @@ $('input[name=\'option\']').catcomplete({
 			html += '  <table id="option-value' + option_row + '" class="list">';
 			html += '  	 <thead>'; 
 			html += '      <tr>';
-			html += '        <td class="left"><?php echo $entry_option_value; ?></td>';
-			html += '        <td class="right"><?php echo $entry_quantity; ?></td>';
-			html += '        <td class="left"><?php echo $entry_subtract; ?></td>';
-			html += '        <td class="right"><?php echo $entry_price; ?></td>';
-			html += '        <td class="right"><?php echo $entry_option_points; ?></td>';
-			html += '        <td class="right"><?php echo $entry_weight; ?></td>';
+			html += '        <td class="left">{$entry_option_value}</td>';
+			html += '        <td class="right">{$entry_quantity}</td>';
+			html += '        <td class="left">{$entry_subtract}</td>';
+			html += '        <td class="right">{$entry_price}</td>';
+			html += '        <td class="right">{$entry_option_points}</td>';
+			html += '        <td class="right">{$entry_weight}</td>';
 			html += '        <td></td>';
 			html += '      </tr>';
 			html += '  	 </thead>';
 			html += '    <tfoot>';
 			html += '      <tr>';
 			html += '        <td colspan="6"></td>';
-			html += '        <td class="left"><a onclick="addOptionValue(' + option_row + ');" class="button"><?php echo $button_add_option_value; ?></a></td>';
+			html += '        <td class="left"><a onclick="addOptionValue(' + option_row + ')}</a></td>';
 			html += '      </tr>';
 			html += '    </tfoot>';
 			html += '  </table>';
@@ -1146,14 +628,6 @@ $('input[name=\'option\']').catcomplete({
 		$('#vtab-option a').tabs();
 		
 		$('#option-' + option_row).trigger('click');		
-		
-		$('.date').datepicker({dateFormat: 'yy-mm-dd'});
-		$('.datetime').datetimepicker({
-			dateFormat: 'yy-mm-dd',
-			timeFormat: 'h:m'
-		});	
-			
-		$('.time').timepicker({timeFormat: 'h:m'});	
 				
 		option_row++;
 		
@@ -1165,7 +639,7 @@ $('input[name=\'option\']').catcomplete({
 });
 //--></script> 
 <script type="text/javascript"><!--		
-var option_value_row = <?php echo $option_value_row; ?>;
+var option_value_row = {$option_value_row};
 
 function addOptionValue(option_row) {	
 	html  = '<tbody id="option-value-row' + option_value_row + '">';
@@ -1175,8 +649,8 @@ function addOptionValue(option_row) {
 	html += '    </select><input type="hidden" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][product_option_value_id]" value="" /></td>';
 	html += '    <td class="right"><input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][quantity]" value="" size="3" /></td>'; 
 	html += '    <td class="left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][subtract]">';
-	html += '      <option value="1"><?php echo $text_yes; ?></option>';
-	html += '      <option value="0"><?php echo $text_no; ?></option>';
+	html += '      <option value="1">{$text_yes}</option>';
+	html += '      <option value="0">{$text_no}</option>';
 	html += '    </select></td>';
 	html += '    <td class="right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price_prefix]">';
 	html += '      <option value="+">+</option>';
@@ -1193,7 +667,7 @@ function addOptionValue(option_row) {
 	html += '      <option value="-">-</option>';
 	html += '    </select>';
 	html += '    <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight]" value="" size="5" /></td>';
-	html += '    <td class="left"><a onclick="$(\'#option-value-row' + option_value_row + '\').remove();" class="button"><?php echo $button_remove; ?></a></td>';
+	html += '    <td class="left"><a onclick="$(\'#option-value-row' + option_value_row + '\').remove()}</a></td>';
 	html += '  </tr>';
 	html += '</tbody>';
 	
@@ -1203,54 +677,52 @@ function addOptionValue(option_row) {
 }
 //--></script> 
 <script type="text/javascript"><!--
-var discount_row = <?php echo $discount_row; ?>;
+var discount_row = {$discount_row};
 
 function addDiscount() {
 	html  = '<tbody id="discount-row' + discount_row + '">';
 	html += '  <tr>'; 
     html += '    <td class="left"><select name="product_discount[' + discount_row + '][customer_group_id]">';
     <?php foreach ($customer_groups as $customer_group) { ?>
-    html += '      <option value="<?php echo $customer_group['customer_group_id']; ?>"><?php echo $customer_group['name']; ?></option>';
-    <?php } ?>
+    html += '      <option value="{$customer_group['customer_group_id']}">{$customer_group['name']}</option>';
+    {/if}
     html += '    </select></td>';		
     html += '    <td class="right"><input type="text" name="product_discount[' + discount_row + '][quantity]" value="" size="2" /></td>';
     html += '    <td class="right"><input type="text" name="product_discount[' + discount_row + '][priority]" value="" size="2" /></td>';
 	html += '    <td class="right"><input type="text" name="product_discount[' + discount_row + '][price]" value="" /></td>';
     html += '    <td class="left"><input type="text" name="product_discount[' + discount_row + '][date_start]" value="" class="date" /></td>';
 	html += '    <td class="left"><input type="text" name="product_discount[' + discount_row + '][date_end]" value="" class="date" /></td>';
-	html += '    <td class="left"><a onclick="$(\'#discount-row' + discount_row + '\').remove();" class="button"><?php echo $button_remove; ?></a></td>';
+	html += '    <td class="left"><a onclick="$(\'#discount-row' + discount_row + '\').remove()}</a></td>';
 	html += '  </tr>';	
     html += '</tbody>';
 	
 	$('#discount tfoot').before(html);
 		
-	$('#discount-row' + discount_row + ' .date').datepicker({dateFormat: 'yy-mm-dd'});
 	
 	discount_row++;
 }
 //--></script> 
 <script type="text/javascript"><!--
-var special_row = <?php echo $special_row; ?>;
+var special_row = {$special_row};
 
 function addSpecial() {
 	html  = '<tbody id="special-row' + special_row + '">';
 	html += '  <tr>'; 
     html += '    <td class="left"><select name="product_special[' + special_row + '][customer_group_id]">';
     <?php foreach ($customer_groups as $customer_group) { ?>
-    html += '      <option value="<?php echo $customer_group['customer_group_id']; ?>"><?php echo $customer_group['name']; ?></option>';
-    <?php } ?>
+    html += '      <option value="{$customer_group['customer_group_id']}">{$customer_group['name']}</option>';
+    {/if}
     html += '    </select></td>';		
     html += '    <td class="right"><input type="text" name="product_special[' + special_row + '][priority]" value="" size="2" /></td>';
 	html += '    <td class="right"><input type="text" name="product_special[' + special_row + '][price]" value="" /></td>';
     html += '    <td class="left"><input type="text" name="product_special[' + special_row + '][date_start]" value="" class="date" /></td>';
 	html += '    <td class="left"><input type="text" name="product_special[' + special_row + '][date_end]" value="" class="date" /></td>';
-	html += '    <td class="left"><a onclick="$(\'#special-row' + special_row + '\').remove();" class="button"><?php echo $button_remove; ?></a></td>';
+	html += '    <td class="left"><a onclick="$(\'#special-row' + special_row + '\').remove()}</a></td>';
 	html += '  </tr>';
     html += '</tbody>';
 	
 	$('#special tfoot').before(html);
  
-	$('#special-row' + special_row + ' .date').datepicker({dateFormat: 'yy-mm-dd'});
 	
 	special_row++;
 }
@@ -1259,14 +731,14 @@ function addSpecial() {
 function image_upload(field, thumb) {
 	$('#dialog').remove();
 	
-	$('#content').prepend('<div id="dialog" style="padding: 3px 0px 0px 0px;"><iframe src="index.php?route=common/filemanager&token=<?php echo $token; ?>&field=' + encodeURIComponent(field) + '" style="padding:0; margin: 0; display: block; width: 100%; height: 100%;" frameborder="no" scrolling="auto"></iframe></div>');
+	$('#content').prepend('<div id="dialog" style="padding: 3px 0px 0px 0px}&field=' + encodeURIComponent(field) + '" style="padding:0; margin: 0; display: block; width: 100%; height: 100%;" frameborder="no" scrolling="auto"></iframe></div>');
 	
 	$('#dialog').dialog({
-		title: '<?php echo $text_image_manager; ?>',
+		title: '{$text_image_manager}',
 		close: function (event, ui) {
 			if ($('#' + field).attr('value')) {
 				$.ajax({
-					url: 'index.php?route=common/filemanager/image&token=<?php echo $token; ?>&image=' + encodeURIComponent($('#' + field).attr('value')),
+					url: 'index.php?route=common/filemanager/image&token={$token}&image=' + encodeURIComponent($('#' + field).attr('value')),
 					dataType: 'text',
 					success: function(text) {
 						$('#' + thumb).replaceWith('<img src="' + text + '" alt="" id="' + thumb + '" />');
@@ -1283,14 +755,14 @@ function image_upload(field, thumb) {
 };
 //--></script> 
 <script type="text/javascript"><!--
-var image_row = <?php echo $image_row; ?>;
+var image_row = {$image_row};
 
 function addImage() {
     html  = '<tbody id="image-row' + image_row + '">';
 	html += '  <tr>';
-	html += '    <td class="left"><div class="image"><img src="<?php echo $no_image; ?>" alt="" id="thumb' + image_row + '" /><input type="hidden" name="product_image[' + image_row + '][image]" value="" id="image' + image_row + '" /><br /><a onclick="image_upload(\'image' + image_row + '\', \'thumb' + image_row + '\');"><?php echo $text_browse; ?></a>&nbsp;&nbsp;|&nbsp;&nbsp;<a onclick="$(\'#thumb' + image_row + '\').attr(\'src\', \'<?php echo $no_image; ?>\'); $(\'#image' + image_row + '\').attr(\'value\', \'\');"><?php echo $text_clear; ?></a></div></td>';
+	html += '    <td class="left"><div class="image"><img src="{$no_image}" alt="" id="thumb' + image_row + '" /><input type="hidden" name="product_image[' + image_row + '][image]" value="" id="image' + image_row + '" /><br /><a onclick="image_upload(\'image' + image_row + '\', \'thumb' + image_row + '\')}</a>&nbsp}\')}</a></div></td>';
 	html += '    <td class="right"><input type="text" name="product_image[' + image_row + '][sort_order]" value="" size="2" /></td>';
-	html += '    <td class="left"><a onclick="$(\'#image-row' + image_row  + '\').remove();" class="button"><?php echo $button_remove; ?></a></td>';
+	html += '    <td class="left"><a onclick="$(\'#image-row' + image_row  + '\').remove()}</a></td>';
 	html += '  </tr>';
 	html += '</tbody>';
 	
@@ -1301,19 +773,12 @@ function addImage() {
 //--></script> 
 <script type="text/javascript" src="view/javascript/jquery/ui/jquery-ui-timepicker-addon.js"></script> 
 <script type="text/javascript"><!--
-$('.date').datepicker({dateFormat: 'yy-mm-dd'});
-$('.datetime').datetimepicker({
-	dateFormat: 'yy-mm-dd',
-	timeFormat: 'h:m'
-});
-$('.time').timepicker({timeFormat: 'h:m'});
 //--></script> 
 <script type="text/javascript"><!--
-$('#tabs a').tabs(); 
-$('#languages a').tabs(); 
+
 $('#vtab-option a').tabs();
 
-var profileCount = <?php echo $profileCount ?>;
+var profileCount = {$profileCount ?>;
 
 function addProfile() {
     profileCount++;
@@ -1323,35 +788,35 @@ function addProfile() {
     html += '  <td class="left">';
     html += '    <select name="product_profiles[' + profileCount + '][profile_id]">';
     <?php foreach ($profiles as $profile): ?>
-    html += '      <option value="<?php echo $profile['profile_id'] ?>"><?php echo $profile['name'] ?></option>';
-    <?php endforeach; ?>
+    html += '      <option value="{$profile['profile_id'] ?>">{$profile['name'] ?></option>';
+    <?php endforeach}
     html += '    </select>';
     html += '  </td>';
     html += '  <td class="left">';
     html += '    <select name="product_profiles[' + profileCount + '][customer_group_id]">';
     <?php foreach ($customer_groups as $customer_group): ?>
-    html += '      <option value="<?php echo $customer_group['customer_group_id'] ?>"><?php echo $customer_group['name'] ?></option>';
-    <?php endforeach; ?>
+    html += '      <option value="{$customer_group['customer_group_id'] ?>">{$customer_group['name'] ?></option>';
+    <?php endforeach}
     html += '    <select>';
     html += '  </td>';
     html += '  <td class="left">';
-    html += '    <a class="button" onclick="$(\'#profile-row' + profileCount + '\').remove()"><?php echo $button_remove ?></a>';
+    html += '    <a class="button" onclick="$(\'#profile-row' + profileCount + '\').remove()">{$button_remove ?></a>';
     html += '  </td>';
     html += '</tr>';
     
     $('#tab-profile table tbody').append(html);
 }
 
-<?php if (isset($this->request->get['item_id'])) { ?>
+{if $this->request->get['item_id']}
     function openbayLinkStatus(){
-        var item_id = '<?php echo $this->request->get['item_id']; ?>';
+        var item_id = '{$this->request->get['item_id']}';
         $.ajax({
             type: 'GET',
-            url: 'index.php?route=extension/openbay/linkStatus&token=<?php echo $token; ?>&item_id='+item_id,
+            url: 'index.php?route=extension/openbay/linkStatus&token={$token}&item_id='+item_id,
             dataType: 'html',
             success: function(data) {
                 //add the button to nav
-                $('<a href="#tab-openbay"><?php echo $tab_marketplace_links ?></a>').hide().appendTo("#tabs").fadeIn(1000);
+                $('<a href="#tab-openbay">{$tab_marketplace_links ?></a>').hide().appendTo("#tabs").fadeIn(1000);
                 $('#tab-general').before(data);
                 $('#tabs a').tabs();
             },
@@ -1367,8 +832,8 @@ function addProfile() {
     $(document).ready(function(){
         openbayLinkStatus();
     });
-<?php } ?>
+{/if}
 
 //--></script>
 
-<?php echo $footer; ?>
\ No newline at end of file
+{$footer}
\ No newline at end of file
diff --git a/catalog/medium/checkout/address.php b/catalog/medium/checkout/address.php
index 0c52963..e8526dc 100644
--- a/catalog/medium/checkout/address.php
+++ b/catalog/medium/checkout/address.php
@@ -11,8 +11,6 @@ class Address extends Medium{
 
 	public function run($action,$data){
 
-		if(!P('checkLogin')) return false;
-	
 		switch ($action) {
 		
 			case 'add':return $this->add($data);break;
diff --git a/catalog/medium/checkout/cart.php b/catalog/medium/checkout/cart.php
index bc8372e..e288295 100755
--- a/catalog/medium/checkout/cart.php
+++ b/catalog/medium/checkout/cart.php
@@ -95,7 +95,7 @@ class Cart extends Medium{
 			
 		}
 		
-		if(P('checkLogin')){
+		if(isLogged()){
 
 			NOSQL::checkout('cart','updateUserCart',array($cart));
 		}
diff --git a/core/action.class.php b/core/action.class.php
index 31c22c1..f143f64 100755
--- a/core/action.class.php
+++ b/core/action.class.php
@@ -11,6 +11,8 @@ class Action extends View{
 	}
 
 	protected function initialize(){
+		//检测登录cookie
+		P('checkLogin');
 		$this->view->registerPlugin('block','lrtip','smarty_block_lrtip',false);
 		$this->view->registerPlugin('block','top','smarty_block_top',false);
 		$this->view->registerPlugin('block','toplr','smarty_block_toplr',false);
@@ -44,27 +46,25 @@ class Action extends View{
 	}
 }
 
-class AccountAction extends Action{
+class iAction extends Action{
 
 	public function __construct(){
 		parent::__construct();
-
 	}
-	
 }
 
-class AdminAction extends Action{
+class AccountAction extends Action{
 
 	public function __construct(){
 		parent::__construct();
-		$this->checkLogin();
 	}
+}
 
-	private function checkLogin(){
-		// print_r($_SESSION);exit();
-		if(!S('ADMIN_UID')){
-			redirect('/admin/index.php?app=login');
-		}
+class AdminAction extends Action{
+
+	public function __construct(){
+		parent::__construct();
+		!isLogged() && redirect('/admin/index.php?app=login');
 	}
 }
 
diff --git a/core/common.php b/core/common.php
index ffefa25..21b3936 100755
--- a/core/common.php
+++ b/core/common.php
@@ -27,3 +27,11 @@ function P($class,$data=array()){
 	$instance=new $classname;
 	return $instance->run($data);
 }
+
+function isLogged(){
+	return !!getLoggedID();
+}
+
+function getLoggedID(){
+	return defined('IS_ADMIN')?S('AID'):S('UID');
+}
\ No newline at end of file
diff --git a/core/config.php b/core/config.php
index ed5ca11..255b363 100755
--- a/core/config.php
+++ b/core/config.php
@@ -10,6 +10,7 @@ define('EXTENSION', ROOT.'/extension/');
 define('ADMIN', ROOT.'/admin/');
 define('CACHE', ROOT.'/cache/');
 define('CONFIG', ROOT.'/config/');
+define('SESSION', ROOT.'/session/');
 
 if (defined('IS_ADMIN')) {
 	// admin path
@@ -19,6 +20,7 @@ if (defined('IS_ADMIN')) {
 	define('VIEW', ADMIN.'view/default/');
 	define('LANG', ADMIN.'lang/');
 	define('IMAGE', '/admin/static/image/');
+	define('COOKIE_TIMEOUT',1800); // 30 min
 }else{
 	// catalog path
 	define('ACTION', CATALOG.'action/');
@@ -26,6 +28,7 @@ if (defined('IS_ADMIN')) {
 	define('MODEL', CATALOG.'model/');
 	define('VIEW', CATALOG.'view/default/');
 	define('LANG', CATALOG.'lang/');
+	define('COOKIE_TIMEOUT',1800); // 30 min
 }
 
 // System
@@ -41,7 +44,7 @@ define('CACHE_DIR', CACHE.'html/');
 define('HTML_CACHE',false);
 
 // cookie  && session
-define('COOKIE_DOMAIN','oc');
+define('COOKIE_DOMAIN','about.com');
 define('COOKIE_ENCRYPT_KEY','tvrc4m@cookie');
 
 
diff --git a/core/view.class.php b/core/view.class.php
index 152e5d3..a5b0261 100755
--- a/core/view.class.php
+++ b/core/view.class.php
@@ -45,8 +45,6 @@ class View{
 		$this->view->setCacheDir(CACHE_DIR);
 		$this->view->setCompileDir(COMPILE_DIR);
 		$this->view->caching=HTML_CACHE;
-		//检测登录cookie
-		// P('CheckLogin');
 	}
 
 	private function init_REQUEST(){
diff --git a/index.php b/index.php
index ad211a7..fdfa959 100755
--- a/index.php
+++ b/index.php
@@ -2,8 +2,8 @@
 
 header('Content-type:text/html;charset=utf-8');
 
-// error_reporting(E_ALL & ~E_NOTICE);
-error_reporting(E_ALL);
+error_reporting(E_ALL & ~E_NOTICE);
+// error_reporting(E_ALL);
 
 date_default_timezone_set('Asia/Shanghai');
 
@@ -13,9 +13,9 @@ $folder=isset($_REQUEST['f'])?strtolower($_REQUEST['f']).'/':'common/';
 
 include_once(ROOT.'/core/config.php');
 
-ini_set('session.cookie_domain',COOKIE_DOMAIN);
+// ini_set('session.cookie_domain',COOKIE_DOMAIN);
 
-#session_save_path(ROOT.'/session');
+session_save_path(SESSION);
 
 session_start();
 
diff --git a/plugin/checkLogin.plugin.php b/plugin/checkLogin.plugin.php
index f8d56c4..baf44ee 100755
--- a/plugin/checkLogin.plugin.php
+++ b/plugin/checkLogin.plugin.php
@@ -1,31 +1,62 @@
 <?php
 
 class CheckLoginPlugin extends Plugin{
-	
-	public function run($data){
-
-		$uid=S('UID');
-
-		if(!empty($uid)) return 1;
-
-		$logged=C('logged');
 
-		if(!empty($logged)){
-			
-			$logged=decrypt($logged);
+	protected $session_uid;
+	protected $session_user;
+	protected $cookie_logged;
 
-			$array=explode(';', $logged);
-
-			$userinfo=array();
-
-			if($_SERVER['HTTP_HOST']==$array[0] &&  getip()==$array[1]){
-
-				$userinfo=SEA::account('user','get.by.uid',array('uid'=>$array[2]));
+	public function run($data){
+		if(defined('IS_ADMIN')){
+			$this->session_uid='AID';
+			$this->session_user="ADMIN";
+			$this->cookie_logged="ADMINLOGGED";
+		}else{
+			$this->session_uid="UID";
+			$this->session_user="USER";
+			$this->cookie_logged="LOGGED";
+		}
+		$uid=S($this->session_uid);
+		$logged=C($this->cookie_logged);
+		$logged=decrypt($logged);
+		$array=explode(';', $logged);
+		if($uid && !empty($array)){
+			if($_SERVER['HTTP_HOST']==$array[0] && getip()==$array[1] && (int)$array[3]+COOKIE_TIMEOUT>time() && $uid==$array[2]){
+				$this->_setCookie($array[2]);
+				return 1;
+			}
+		}else if(!empty($array)){
+			if($_SERVER['HTTP_HOST']==$array[0] && getip()==$array[1] && (int)$array[3]+COOKIE_TIMEOUT>time()){
+				if(defined('IS_ADMIN'))
+					$userinfo=M::admin('admin','get',array('uid'=>$array[2]));
+				else
+					$userinfo=SEA::account('user','get.by.uid',array('uid'=>$array[2]));
+				if(!empty($userinfo)){
+					$this->_setSession($userinfo);
+					$this->_setCookie($userinfo['user_id']);
+					return 1;
+				}
 			}
-			
-			return P('loginSession',$userinfo);
 		}
-
+		$this->_clear();
 		return 0;
 	}
+
+	private function _setSession($user){
+		S($this->session_user,$user);
+		S($this->session_uid,$user['user_id']);
+	}
+
+	private function _setCookie($uid){
+		$ip=getip();
+		$time=time();
+		$logged="{$_SERVER['HTTP_HOST']};{$ip};{$uid};{$time}";
+		C($this->cookie_logged,encrypt($logged));
+	}
+	private function _clear(){
+		C($this->cookie_logged,null);
+		S($this->session_uid,null);
+		if(file_exists(ROOT.'/session/sess_'.session_id()))
+			session_destroy();
+	}
 }
\ No newline at end of file
diff --git a/plugin/loginSession.plugin.php b/plugin/loginSession.plugin.php
deleted file mode 100644
index 5be5a64..0000000
--- a/plugin/loginSession.plugin.php
+++ /dev/null
@@ -1,28 +0,0 @@
-<?php
-
-class LoginSessionPlugin extends Plugin{
-
-	public function run($userinfo){
-		
-		if(empty($userinfo)){
-
-			C('logged',null);
-			
-			return 0;
-		} 
-
-		$uid=$userinfo['user_id'];
-
-		S('user',$userinfo);
-
-		S('uid',$uid);
-
-		$ip=getip();
-
-		$logged="{$_SERVER['HTTP_HOST']};{$ip};{$uid};{time()}";
-
-		C('logged',encrypt($logged));
-
-		return 1;
-	}
-}
\ No newline at end of file
diff --git a/plugin/needLogin.plugin.php b/plugin/needLogin.plugin.php
deleted file mode 100755
index c785230..0000000
--- a/plugin/needLogin.plugin.php
+++ /dev/null
@@ -1,15 +0,0 @@
-<?php
-
-class NeedLoginPlugin extends Plugin{
-	
-	public function run($data){
-echo 3434;exit();
-		$status=P('CheckLogin');
-
-		//$furl='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_RUI'];
-		
-		if(!$status) go(HOST.'/login.html');
-
-		return 1;
-	}
-}
\ No newline at end of file
